{"ast":null,"code":"import _slicedToArray from\"/Users/hyerm2/Desktop/project/vision/CourseApplicationManagement_frontend/course_application_management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useRef,useEffect,useState}from\"react\";import TUICalendar from\"@toast-ui/react-calendar\";// import { ISchedule, ICalendarInfo } from \"tui-calendar\";\nimport\"tui-calendar/dist/tui-calendar.css\";import\"tui-date-picker/dist/tui-date-picker.css\";import'../../../assets/css/calendar.css';import\"tui-time-picker/dist/tui-time-picker.css\";import WhiteButton from'../../modules/button/white_button';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var allcalendarColor=[\"#ef6f87\",\"#e49d5a\",\"#e4ce5a\",\"#7ddc8b\",\"#c0afff\",\"#9fcae8\",\"#F23DA0\",\"#3C5FA6\",\"#F28705\",\"#467326\",\"#D99066\",\"#ff5722\"];var calendarColor=[\"#fbbc05\",\"#cccccc\",\"#4285f4\",\"#7ddc8b\",\"#000000\",\"#9fcae8\",\"#F23DA0\",\"#3C5FA6\",\"#F28705\",\"#467326\",\"#D99066\",\"#ff5722\"];// const calendarInstructor = [\"#ef6f87\",\"#e49d5a\", \"#2196f3\", \"#7ddc8b\" ,\"#c0afff\",\"#9fcae8\",\"#F23DA0\", \"#3C5FA6\", \"#F28705\", \"#467326\", \"#D99066\", \"#ff5722\"];\nfunction CommonCalendar(props){var cal=useRef(null);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),schedules=_useState2[0],setschedules=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),calendars=_useState4[0],setcalendars=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),year=_useState6[0],setyear=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),month=_useState8[0],setmonth=_useState8[1];useEffect(function(){if(props.calendarData!==null){var index;var tempSchedule;var tempCalendar;var i;var i;var status_id;var start_time;var end_time;var isAllDay;(function(){var data=props.calendarData;index=0;tempSchedule=[];tempCalendar=[];if(props.path!==null&&(props.path===\"/\"||props.path===\"/lecture/date\")){for(i=0;i<data.length;i++){tempSchedule.push({calendarId:data[i].id,category:\"time\",isAllDay:true,isVisible:true,title:data[i].name,id:data[i].id,body:\"[강사명] \"+data[i].inst_name+\"- [주제]\"+data[i].topic_list,start:data[i].date,end:data[i].date,location:data[i].region_list});// eslint-disable-next-line no-loop-func\nif(!tempCalendar.find(function(element){return element.id===data[i].id;})){tempCalendar.push({id:data[i].id,name:data[i].name,color:allcalendarColor[index],bgColor:allcalendarColor[index]+\"40\",dragBgColor:allcalendarColor[index]+\"40\",borderColor:allcalendarColor[index]});index++;}if(index===calendarColor.length)index=0;}}else if(props.path===\"/mypage/contact\"||props.path===\"/lecture/subject\"||props.path===\"/lecture/instructor\"||props.path===\"/admin/lecture\"||props.path===\"/mypage/lecture\"){// var tempSchedule = [];\n// var tempCalendar = [];\n// eslint-disable-next-line no-redeclare\nfor(i=0;i<data.length;i++){status_id=1;start_time=data[i].date;end_time=data[i].date;isAllDay=true;// 신청자가 있을 때\nif(data[i].form_id){// status\nif(data[i].status===0)status_id=1;else if(data[i].status===1)status_id=2;else if(data[i].status===2){status_id=3;start_time=data[i].date+\" \"+data[i].contact_start_date;end_time=data[i].date+\" \"+data[i].contact_end_date;isAllDay=false;}// 취소된 컨택내역은 안보여줌\nif(data[i].status!==-1)tempSchedule.push({calendarId:status_id,category:\"time\",isAllDay:isAllDay,isVisible:true,title:data[i].name,id:status_id,body:\"[주제]\"+data[i].topic_list,start:start_time,end:end_time,location:data[i].region_list});}else{tempSchedule.push({calendarId:4,category:\"time\",isAllDay:true,isVisible:true,title:data[i].name,id:3,body:\"[주제]\"+data[i].topic_list,start:data[i].date,end:data[i].date,location:data[i].region_list});}}if(props.path===\"/admin/lecture\"||props.path===\"/mypage/lecture\"){if(props.academyDates!==null){props.academyDates.forEach(function(data,index){tempSchedule.push({calendarId:6,isAllDay:true,isVisible:true,category:\"time\",isReadOnly:true,title:data.name,id:0,start:data.date,end:data.date});});}}if(props.path===\"/lecture/subject\"||props.path===\"/lecture/date\"||props.path===\"/lecture/instructor\"){tempCalendar.push({id:1,name:\"강사 확인전\",color:calendarColor[0],bgColor:calendarColor[0]+\"40\",dragBgColor:calendarColor[0]+\"40\",borderColor:calendarColor[0]});}else{tempCalendar.push({id:1,name:\"신규(미확인)\",color:calendarColor[0],bgColor:calendarColor[0]+\"40\",dragBgColor:calendarColor[0]+\"40\",borderColor:calendarColor[0]});}tempCalendar.push({id:2,name:\"진행중\",color:calendarColor[1],bgColor:calendarColor[1]+\"40\",dragBgColor:calendarColor[1]+\"40\",borderColor:calendarColor[1]});tempCalendar.push({id:3,name:\"일정확정됨\",color:calendarColor[2],bgColor:calendarColor[2]+\"40\",dragBgColor:calendarColor[2]+\"40\",borderColor:calendarColor[2]});tempCalendar.push({id:4,name:\"신청없음\",color:calendarColor[3],bgColor:calendarColor[3]+\"40\",dragBgColor:calendarColor[3]+\"40\",borderColor:calendarColor[3]});tempCalendar.push({id:5,name:\"컨택취소\",color:calendarColor[4],bgColor:calendarColor[4]+\"40\",dragBgColor:calendarColor[4]+\"40\",borderColor:calendarColor[4]});tempCalendar.push({id:6,name:\"학사일정\",color:calendarColor[4],bgColor:calendarColor[4]+\"40\",dragBgColor:calendarColor[4]+\"40\",borderColor:calendarColor[4]});}setschedules(tempSchedule);setcalendars(tempCalendar);})();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[props.calendarData]);useEffect(function(){if(cal!==null){var calendarInstance=cal.current.getInstance();calendarInstance.today();var m=calendarInstance.getDate().getMonth()+1;var y=calendarInstance.getDate().getFullYear();if(m<10)m=\"0\"+m;var date=y+\"-\"+m;setmonth(m);setyear(y);if(props.clickedLecture!==null&&(props.path===\"/lecture/subject\"||props.path===\"/lecture/instructor\"||props.path===\"/admin/lecture\"||props.path===\"/mypage/lecture\"))props.readMainCalendar(date,props.clickedLecture.id);else props.readMainCalendar(date);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(function(){var calendarInstance=cal.current.getInstance();calendarInstance.today();var m=calendarInstance.getDate().getMonth()+1;var y=calendarInstance.getDate().getFullYear();if(m<10)m=\"0\"+m;// var date = y+\"-\"+m;\nsetmonth(m);setyear(y);},[props.clickedLecture]);var onClickSchedule=useCallback(function(e){var _e$schedule=e.schedule,calendarId=_e$schedule.calendarId,id=_e$schedule.id;cal.current.calendarInst.getElement(id,calendarId);},[]);var onBeforeCreateSchedule=useCallback(function(scheduleData){var schedule={id:String(Math.random()),title:scheduleData.title,isAllDay:scheduleData.isAllDay,start:scheduleData.start,end:scheduleData.end,category:scheduleData.isAllDay?\"allday\":\"time\",dueDateClass:\"\",location:scheduleData.location,raw:{class:scheduleData.raw[\"class\"]},state:scheduleData.state};cal.current.calendarInst.createSchedules([schedule]);},[]);var onBeforeDeleteSchedule=useCallback(function(res){var _res$schedule=res.schedule,id=_res$schedule.id,calendarId=_res$schedule.calendarId;cal.current.calendarInst.deleteSchedule(id,calendarId);},[]);var onBeforeUpdateSchedule=useCallback(function(e){var schedule=e.schedule,changes=e.changes;cal.current.calendarInst.updateSchedule(schedule.id,schedule.calendarId,changes);},[]);function _getFormattedTime(time){var date=new Date(time);var h=date.getHours();var m=date.getMinutes();return\"\".concat(h,\":\").concat(m);}function _getTimeTemplate(schedule,isAllDay){var html=[];if(!isAllDay){html.push(\"<strong>\"+_getFormattedTime(schedule.start)+\"</strong> \");}if(schedule.isPrivate){html.push('<span class=\"calendar-font-icon ic-lock-b\"></span>');html.push(\" Private\");}else{if(schedule.isReadOnly){html.push('<span class=\"calendar-font-icon ic-readonly-b\"></span>');}else if(schedule.recurrenceRule){html.push('<span class=\"calendar-font-icon ic-repeat-b\"></span>');}else if(schedule.attendees.length){html.push('<span class=\"calendar-font-icon ic-user-b\"></span>');}else if(schedule.location){html.push('<span class=\"calendar-font-icon ic-location-b\"></span>');}html.push(\" \"+schedule.title);}return html.join(\"\");}var templates={time:function time(schedule){return _getTimeTemplate(schedule,false);}};var NextButton=useCallback(function(e){if(cal!==null){var calendarInstance=cal.current.getInstance();calendarInstance.next();var m=calendarInstance.getDate().getMonth()+1;var y=calendarInstance.getDate().getFullYear();if(m<10)m=\"0\"+m;var date=y+\"-\"+m;setmonth(m);setyear(y);if((props.path===\"/lecture/subject\"||props.path===\"/lecture/instructor\"||props.path===\"/admin/lecture\"||props.path===\"/mypage/lecture\")&&props.clickedLecture!==null)props.readMainCalendar(date,props.clickedLecture.id);else props.readMainCalendar(date);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[props.clickedLecture]);var PrevButton=useCallback(function(e){if(cal!==null){var calendarInstance=cal.current.getInstance();calendarInstance.prev();var m=calendarInstance.getDate().getMonth()+1;var y=calendarInstance.getDate().getFullYear();if(m<10)m=\"0\"+m;var date=y+\"-\"+m;setmonth(m);setyear(y);if((props.path===\"/lecture/subject\"||props.path===\"/lecture/instructor\"||props.path===\"/admin/lecture\"||props.path===\"/mypage/lecture\")&&props.clickedLecture!==null){props.readMainCalendar(date,props.clickedLecture.id);}else props.readMainCalendar(date);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[props.clickedLecture]);var TodayButton=useCallback(function(e){if(cal!==null){var calendarInstance=cal.current.getInstance();calendarInstance.today();var m=calendarInstance.getDate().getMonth()+1;var y=calendarInstance.getDate().getFullYear();if(m<10)m=\"0\"+m;var date=y+\"-\"+m;setmonth(m);setyear(y);if((props.path===\"/lecture/subject\"||props.path===\"/lecture/instructor\"||props.path===\"/admin/lecture\"||props.path===\"/mypage/lecture\")&&props.clickedLecture!==null)props.readMainCalendar(date,props.clickedLecture.id);else props.readMainCalendar(date);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[props.clickedLecture]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"calendar-title\",children:[year,\"\\uB144 \",month,\"\\uC6D4\\uC758 \\uAC15\\uC758\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb15\",children:[/*#__PURE__*/_jsx(WhiteButton,{class:\"mr15\",name:\"\\uC624\\uB298\\uB0A0\\uC9DC\",click:TodayButton}),/*#__PURE__*/_jsx(WhiteButton,{class:\"mr15\",name:\"<\",click:PrevButton}),/*#__PURE__*/_jsx(WhiteButton,{name:\">\",click:NextButton})]}),props.path!==null&&(props.path===\"/mypage/contact\"||props.path===\"/lecture/subject\"||props.path===\"/lecture/instructor\"||props.path===\"/admin/lecture\"||props.path===\"/mypage/lecture\")?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"right\",marginBottom:\"15px\"},children:[/*#__PURE__*/_jsxs(\"span\",{className:\"mr15\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"color-circle\",style:{background:calendarColor[0]}}),/*#__PURE__*/_jsx(\"span\",{children:props.path===\"/lecture/subject\"||props.path===\"/lecture/date\"||props.path===\"/lecture/instructor\"?\"강사 확인전\":\"신규(미확인)\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"mr15\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"color-circle\",style:{background:calendarColor[1]}}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uC9C4\\uD589\\uC911\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"mr15\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"color-circle\",style:{background:calendarColor[2]}}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uC77C\\uC815\\uD655\\uC815\\uB428\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"mr15\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"color-circle\",style:{background:calendarColor[3]}}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uC2E0\\uCCAD\\uC5C6\\uC74C\"})]}),props.path===\"/mypage/lecture\"||props.path===\"/admin/lecture\"?/*#__PURE__*/_jsxs(\"span\",{className:\"mr15\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"color-circle\",style:{background:calendarColor[4]}}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD559\\uC0AC\\uC77C\\uC815\"})]}):null]}):null,/*#__PURE__*/_jsx(TUICalendar,{ref:cal,height:\"100%\",view:\"month\",useCreationPopup:true,useDetailPopup:true,template:templates,calendars:calendars,schedules:schedules,isReadOnly:true,onClickSchedule:onClickSchedule,onBeforeCreateSchedule:onBeforeCreateSchedule,onBeforeDeleteSchedule:onBeforeDeleteSchedule,onBeforeUpdateSchedule:onBeforeUpdateSchedule})]});}export default CommonCalendar;","map":{"version":3,"sources":["/Users/hyerm2/Desktop/project/vision/CourseApplicationManagement_frontend/course_application_management/src/components/modules/calendar/read_calendar.js"],"names":["React","useCallback","useRef","useEffect","useState","TUICalendar","WhiteButton","allcalendarColor","calendarColor","CommonCalendar","props","cal","schedules","setschedules","calendars","setcalendars","year","setyear","month","setmonth","calendarData","index","tempSchedule","tempCalendar","i","status_id","start_time","end_time","isAllDay","data","path","length","push","calendarId","id","category","isVisible","title","name","body","inst_name","topic_list","start","date","end","location","region_list","find","element","color","bgColor","dragBgColor","borderColor","form_id","status","contact_start_date","contact_end_date","academyDates","forEach","isReadOnly","calendarInstance","current","getInstance","today","m","getDate","getMonth","y","getFullYear","clickedLecture","readMainCalendar","onClickSchedule","e","schedule","calendarInst","getElement","onBeforeCreateSchedule","scheduleData","String","Math","random","dueDateClass","raw","class","state","createSchedules","onBeforeDeleteSchedule","res","deleteSchedule","onBeforeUpdateSchedule","changes","updateSchedule","_getFormattedTime","time","Date","h","getHours","getMinutes","_getTimeTemplate","html","isPrivate","recurrenceRule","attendees","join","templates","NextButton","next","PrevButton","prev","TodayButton","textAlign","marginBottom","background"],"mappings":"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","sourcesContent":["import React, { useCallback, useRef, useEffect, useState } from \"react\";\n\nimport TUICalendar from \"@toast-ui/react-calendar\";\n// import { ISchedule, ICalendarInfo } from \"tui-calendar\";\n\nimport \"tui-calendar/dist/tui-calendar.css\";\nimport \"tui-date-picker/dist/tui-date-picker.css\";\nimport '../../../assets/css/calendar.css';\nimport \"tui-time-picker/dist/tui-time-picker.css\";\nimport WhiteButton from '../../modules/button/white_button';\n\nconst allcalendarColor = [\"#ef6f87\",\"#e49d5a\", \"#e4ce5a\", \"#7ddc8b\" ,\"#c0afff\",\"#9fcae8\",\"#F23DA0\", \"#3C5FA6\", \"#F28705\", \"#467326\", \"#D99066\", \"#ff5722\"];\nconst calendarColor = [\"#fbbc05\", \"#cccccc\", \"#4285f4\", \"#7ddc8b\" ,\"#000000\",\"#9fcae8\",\"#F23DA0\", \"#3C5FA6\", \"#F28705\", \"#467326\", \"#D99066\", \"#ff5722\"];\n// const calendarInstructor = [\"#ef6f87\",\"#e49d5a\", \"#2196f3\", \"#7ddc8b\" ,\"#c0afff\",\"#9fcae8\",\"#F23DA0\", \"#3C5FA6\", \"#F28705\", \"#467326\", \"#D99066\", \"#ff5722\"];\n\n\nfunction CommonCalendar(props) {\n    const cal = useRef(null);\n    const [schedules, setschedules] = useState([])\n    const [calendars, setcalendars] = useState([])\n    const [year, setyear] = useState(null)\n    const [month, setmonth] = useState(null)\n\n    useEffect(() => {\n        if(props.calendarData !== null) {\n            const data = props.calendarData;\n            \n            var index = 0;\n            var tempSchedule = [];\n            var tempCalendar = [];\n            \n            if(props.path !== null && (props.path ===\"/\" || props.path ===\"/lecture/date\")) {\n\n                for(var i=0 ; i<data.length ; i++) {\n                    tempSchedule.push({\n                        calendarId: data[i].id,\n                        category: \"time\",\n                        isAllDay: true,\n                        isVisible: true,\n                        title: data[i].name,\n                        id: data[i].id,\n                        body: \"[강사명] \"+data[i].inst_name+\"- [주제]\" +data[i].topic_list,\n                        start: data[i].date,\n                        end: data[i].date,\n                        location: data[i].region_list\n                    })\n\n                    // eslint-disable-next-line no-loop-func\n                    if(!tempCalendar.find(element => element.id === data[i].id)) {\n                        tempCalendar.push({\n                            id: data[i].id,\n                            name: data[i].name,\n                            color: allcalendarColor[index],\n                            bgColor: allcalendarColor[index]+\"40\",\n                            dragBgColor: allcalendarColor[index]+\"40\",\n                            borderColor: allcalendarColor[index]\n                        })\n                        index++;\n                    }\n                    \n                    if(index === calendarColor.length)\n                        index=0;\n                }\n            }\n            else if(props.path === \"/mypage/contact\" || props.path === \"/lecture/subject\" || props.path === \"/lecture/instructor\" || props.path === \"/admin/lecture\" || props.path === \"/mypage/lecture\") {\n                // var tempSchedule = [];\n                // var tempCalendar = [];\n                // eslint-disable-next-line no-redeclare\n                for(var i=0 ; i<data.length ; i++) {\n                    var status_id = 1;\n                    var start_time = data[i].date;\n                    var end_time = data[i].date;\n                    var isAllDay = true;\n                    \n                    // 신청자가 있을 때\n                    if(data[i].form_id) {\n                        // status\n                        if(data[i].status === 0)\n                            status_id = 1\n                        else if(data[i].status === 1)\n                            status_id = 2\n                        else if(data[i].status === 2) {\n                            status_id = 3\n                            start_time = data[i].date+\" \"+data[i].contact_start_date\n                            end_time = data[i].date+\" \"+data[i].contact_end_date\n                            isAllDay = false\n                        }\n                        \n                        // 취소된 컨택내역은 안보여줌\n                        if(data[i].status !== -1)\n                            tempSchedule.push({\n                                calendarId: status_id,\n                                category: \"time\",\n                                isAllDay: isAllDay,\n                                isVisible: true,\n                                title: data[i].name,\n                                id: status_id,\n                                body: \"[주제]\" +data[i].topic_list,\n                                start: start_time,\n                                end: end_time,\n                                location: data[i].region_list\n                            })\n                    } else {\n                        tempSchedule.push({\n                            calendarId: 4,\n                            category: \"time\",\n                            isAllDay: true,\n                            isVisible: true,\n                            title: data[i].name,\n                            id: 3,\n                            body: \"[주제]\" +data[i].topic_list,\n                            start: data[i].date,\n                            end: data[i].date,\n                            location: data[i].region_list\n                        })\n                    }\n                }\n\n                if(props.path === \"/admin/lecture\" || props.path === \"/mypage/lecture\") {\n                    if(props.academyDates !== null) {\n                        props.academyDates.forEach((data, index) => {\n                            tempSchedule.push({\n                                calendarId: 6,\n                                isAllDay: true,\n                                isVisible: true,\n                                category: \"time\",\n                                isReadOnly: true,\n                                title: data.name,\n                                id: 0,\n                                start: data.date,\n                                end: data.date\n                            })\n                        });\n                    }        \n                }\n                \n                if(props.path === \"/lecture/subject\" || props.path === \"/lecture/date\" || props.path === \"/lecture/instructor\") {\n                    tempCalendar.push({\n                        id: 1,\n                        name: \"강사 확인전\",\n                        color: calendarColor[0],\n                        bgColor: calendarColor[0]+\"40\",\n                        dragBgColor: calendarColor[0]+\"40\",\n                        borderColor: calendarColor[0]\n                    })\n                } else {\n                    tempCalendar.push({\n                        id: 1,\n                        name: \"신규(미확인)\",\n                        color: calendarColor[0],\n                        bgColor: calendarColor[0]+\"40\",\n                        dragBgColor: calendarColor[0]+\"40\",\n                        borderColor: calendarColor[0]\n                    })\n                }\n                tempCalendar.push({\n                    id: 2,\n                    name: \"진행중\",\n                    color: calendarColor[1],\n                    bgColor: calendarColor[1]+\"40\",\n                    dragBgColor: calendarColor[1]+\"40\",\n                    borderColor: calendarColor[1]\n                })\n                tempCalendar.push({\n                    id: 3,\n                    name: \"일정확정됨\",\n                    color: calendarColor[2],\n                    bgColor: calendarColor[2]+\"40\",\n                    dragBgColor: calendarColor[2]+\"40\",\n                    borderColor: calendarColor[2]\n                })\n                tempCalendar.push({\n                    id: 4,\n                    name: \"신청없음\",\n                    color: calendarColor[3],\n                    bgColor: calendarColor[3]+\"40\",\n                    dragBgColor: calendarColor[3]+\"40\",\n                    borderColor: calendarColor[3]\n                })\n                tempCalendar.push({\n                    id: 5,\n                    name: \"컨택취소\",\n                    color: calendarColor[4],\n                    bgColor: calendarColor[4]+\"40\",\n                    dragBgColor: calendarColor[4]+\"40\",\n                    borderColor: calendarColor[4]\n                })\n                tempCalendar.push({\n                    id: 6,\n                    name: \"학사일정\",\n                    color: calendarColor[4],\n                    bgColor: calendarColor[4]+\"40\",\n                    dragBgColor: calendarColor[4]+\"40\",\n                    borderColor: calendarColor[4]\n                })\n            }\n\n            setschedules(tempSchedule)\n            setcalendars(tempCalendar)\n\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.calendarData])\n\n\n    useEffect(() => {\n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.today();\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n            var date = y+\"-\"+m;\n\n            setmonth(m);\n            setyear(y);\n\n            if(props.clickedLecture !== null && (props.path === \"/lecture/subject\" || props.path === \"/lecture/instructor\" || props.path === \"/admin/lecture\" || props.path === \"/mypage/lecture\"))\n                props.readMainCalendar(date, props.clickedLecture.id);\n            else\n                props.readMainCalendar(date)\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    useEffect(() => {\n        const calendarInstance = cal.current.getInstance();\n        calendarInstance.today();\n        var m = calendarInstance.getDate().getMonth() + 1;\n        var y = calendarInstance.getDate().getFullYear();\n        if(m < 10)\n            m = \"0\"+m;\n        // var date = y+\"-\"+m;\n\n        setmonth(m);\n        setyear(y);\n    }, [props.clickedLecture])\n\n\n    const onClickSchedule = useCallback((e) => {\n        const { calendarId, id } = e.schedule;\n        cal.current.calendarInst.getElement(id, calendarId);\n\n    }, []);\n\n    const onBeforeCreateSchedule = useCallback((scheduleData) => {\n        \n        const schedule = {\n            id: String(Math.random()),\n            title: scheduleData.title,\n            isAllDay: scheduleData.isAllDay,\n            start: scheduleData.start,\n            end: scheduleData.end,\n            category: scheduleData.isAllDay ? \"allday\" : \"time\",\n            dueDateClass: \"\",\n            location: scheduleData.location,\n            raw: {\n                class: scheduleData.raw[\"class\"]\n            },\n            state: scheduleData.state\n        };\n        cal.current.calendarInst.createSchedules([schedule]);\n    }, []);\n\n    const onBeforeDeleteSchedule = useCallback((res) => {\n\n        const { id, calendarId } = res.schedule;\n\n        cal.current.calendarInst.deleteSchedule(id, calendarId);\n    }, []);\n\n    const onBeforeUpdateSchedule = useCallback((e) => {\n        \n        const { schedule, changes } = e;\n\n        cal.current.calendarInst.updateSchedule(\n            schedule.id,\n            schedule.calendarId,\n            changes\n        );\n    }, []);\n\n    function _getFormattedTime(time) {\n        const date = new Date(time);\n        const h = date.getHours();\n        const m = date.getMinutes();\n\n        return `${h}:${m}`;\n    }\n\n    function _getTimeTemplate(schedule, isAllDay) {\n        var html = [];\n\n        if (!isAllDay) {\n            html.push(\"<strong>\" + _getFormattedTime(schedule.start) + \"</strong> \");\n        }\n        if (schedule.isPrivate) {\n            html.push('<span class=\"calendar-font-icon ic-lock-b\"></span>');\n            html.push(\" Private\");\n        } else {\n            if (schedule.isReadOnly) {\n                html.push('<span class=\"calendar-font-icon ic-readonly-b\"></span>');\n            } else if (schedule.recurrenceRule) {\n                html.push('<span class=\"calendar-font-icon ic-repeat-b\"></span>');\n            } else if (schedule.attendees.length) {\n                html.push('<span class=\"calendar-font-icon ic-user-b\"></span>');\n            } else if (schedule.location) {\n                html.push('<span class=\"calendar-font-icon ic-location-b\"></span>');\n            }\n            html.push(\" \" + schedule.title);\n        }\n\n        return html.join(\"\");\n    }\n\n    const templates = {\n        time: function (schedule) {\n            return _getTimeTemplate(schedule, false);\n        }\n    };\n\n\n    const NextButton = useCallback((e) => {\n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.next();\n\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n            var date = y+\"-\"+m;\n\n            setmonth(m);\n            setyear(y);\n\n            if((props.path === \"/lecture/subject\" || props.path === \"/lecture/instructor\" || props.path === \"/admin/lecture\" || props.path === \"/mypage/lecture\") && props.clickedLecture !== null)\n                props.readMainCalendar(date, props.clickedLecture.id);\n            else\n                props.readMainCalendar(date)\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.clickedLecture]);\n\n    const PrevButton = useCallback((e) => {\n        \n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.prev();\n\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n            var date = y+\"-\"+m;\n\n            setmonth(m);\n            setyear(y)\n\n            if((props.path === \"/lecture/subject\" || props.path === \"/lecture/instructor\" || props.path === \"/admin/lecture\" || props.path === \"/mypage/lecture\") && props.clickedLecture !== null) {\n                props.readMainCalendar(date, props.clickedLecture.id);\n            }\n            else\n                props.readMainCalendar(date)\n        }\n\n        \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.clickedLecture]);\n\n    const TodayButton = useCallback((e) => {\n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.today();\n\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n            var date = y+\"-\"+m;\n\n            setmonth(m);\n            setyear(y)\n\n            if((props.path === \"/lecture/subject\" || props.path === \"/lecture/instructor\" || props.path === \"/admin/lecture\" || props.path === \"/mypage/lecture\") && props.clickedLecture !== null)\n                props.readMainCalendar(date, props.clickedLecture.id);\n            else\n                props.readMainCalendar(date)\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.clickedLecture]);\n\n    return (\n        <div>\n        \n        <h2 className=\"calendar-title\">{year}년 {month}월의 강의</h2>\n       \n            <div className=\"mb15\">\n                <WhiteButton class=\"mr15\" name=\"오늘날짜\" click={TodayButton}/>\n                <WhiteButton class=\"mr15\" name=\"<\" click={PrevButton}/>\n                <WhiteButton name=\">\" click={NextButton}/>\n            </div>\n            {props.path !== null && (props.path === \"/mypage/contact\" || props.path === \"/lecture/subject\" || props.path === \"/lecture/instructor\" || props.path === \"/admin/lecture\" || props.path === \"/mypage/lecture\") ?\n            <div style={{textAlign:\"right\", marginBottom:\"15px\"}}>\n                <span className=\"mr15\">\n                    <span className=\"color-circle\" style={{background:calendarColor[0]}}></span>\n                    <span>{props.path === \"/lecture/subject\" || props.path === \"/lecture/date\" || props.path === \"/lecture/instructor\" ? \"강사 확인전\" : \"신규(미확인)\"}</span>\n                </span>\n                <span className=\"mr15\">\n                    <span className=\"color-circle\" style={{background:calendarColor[1]}}></span>\n                    <span>진행중</span>\n                </span>\n                <span className=\"mr15\">\n                    <span className=\"color-circle\" style={{background:calendarColor[2]}}></span>\n                    <span>일정확정됨</span>\n                </span>\n                <span className=\"mr15\">\n                    <span className=\"color-circle\" style={{background:calendarColor[3]}}></span>\n                    <span>신청없음</span>\n                </span>\n                {props.path === \"/mypage/lecture\" || props.path === \"/admin/lecture\" ?\n                <span className=\"mr15\">\n                    <span className=\"color-circle\" style={{background:calendarColor[4]}}></span>\n                    <span>학사일정</span>\n                </span>:\n                null\n                }\n            </div> :\n            null\n            }\n            \n            <TUICalendar\n                ref={cal}\n                height=\"100%\"\n                view=\"month\"\n                useCreationPopup={true}\n                useDetailPopup={true}\n                template={templates}\n                calendars={calendars}\n                schedules={schedules}\n                isReadOnly={true}\n                onClickSchedule={onClickSchedule}\n                onBeforeCreateSchedule={onBeforeCreateSchedule}\n                onBeforeDeleteSchedule={onBeforeDeleteSchedule}\n                onBeforeUpdateSchedule={onBeforeUpdateSchedule}\n            />\n        </div>\n    );\n}\n\nexport default CommonCalendar;"]},"metadata":{},"sourceType":"module"}