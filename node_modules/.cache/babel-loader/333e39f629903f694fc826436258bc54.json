{"ast":null,"code":"import _slicedToArray from\"/Users/moonhahyeon/git/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useRef,useEffect,useState}from\"react\";import TUICalendar from\"@toast-ui/react-calendar\";import\"tui-calendar/dist/tui-calendar.css\";import\"tui-date-picker/dist/tui-date-picker.css\";import'../../../assets/css/calendar.css';import\"tui-time-picker/dist/tui-time-picker.css\";import WhiteButton from'../button/white_button';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var calendarColor=[\"#000000\",\"#e49d5a\",\"#4285f4\",\"#e4ce5a\",\"#c0afff\",\"#9fcae8\",\"#F23DA0\",\"#3C5FA6\",\"#F28705\",\"#467326\",\"#D99066\",\"#ff5722\"];function LectureCalendar(props){var cal=useRef(null);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),schedules=_useState2[0],setschedules=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),calendars=_useState4[0],setcalendars=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),year=_useState6[0],setyear=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),month=_useState8[0],setmonth=_useState8[1];useEffect(function(){if(props.calendarData!==null){var data=props.calendarData;// var index = 0;\nvar tempSchedule=[];for(var i=0;i<data.length;i++){if(data[i].form_id===0){tempSchedule.push({calendarId:2,category:\"time\",isAllDay:true,isVisible:true,title:\"강의\"+(i+1),id:i+1,start:data[i].date,end:data[i].date});}else{tempSchedule.push({calendarId:1,category:\"time\",isAllDay:true,isReadOnly:true,isVisible:true,title:\"강의\"+(i+1),id:i+1,start:data[i].date,end:data[i].date});}}if(props.academyDates!==null){props.academyDates.forEach(function(data,index){tempSchedule.push({calendarId:3,isAllDay:true,isVisible:true,category:\"time\",isReadOnly:true,title:data.name,id:0,start:data.date,end:data.date});});}var tempCalendar=[];tempCalendar.push({id:1,name:\"수정 불가\",color:calendarColor[3],bgColor:calendarColor[3]+\"40\",dragBgColor:calendarColor[3]+\"40\",borderColor:calendarColor[3]});tempCalendar.push({id:2,name:\"수정 가능\",color:calendarColor[2],bgColor:calendarColor[2]+\"40\",dragBgColor:calendarColor[2]+\"40\",borderColor:calendarColor[2]});tempCalendar.push({id:3,name:\"학사 일정\",color:calendarColor[0],bgColor:calendarColor[0]+\"40\",dragBgColor:calendarColor[0]+\"40\",borderColor:calendarColor[0]});setcalendars(tempCalendar);setschedules(tempSchedule);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[props.calendarData]);useEffect(function(){var today=new Date();var year=today.getFullYear();// 년도\nvar month=today.getMonth()+1;// 월\n// let date = today.getDate();  // 날짜\n// let day = today.getDay();  // 요일\nif(month<10)month=\"0\"+month;setyear(year);setmonth(month);},[]);var onClickSchedule=useCallback(function(e){var _e$schedule=e.schedule,calendarId=_e$schedule.calendarId,id=_e$schedule.id;cal.current.calendarInst.getElement(id,calendarId);},[]);var onBeforeCreateSchedule=useCallback(function(scheduleData){var date=scheduleData.start._date;var year=date.getFullYear();var month=date.getMonth()+1;var day=date.getDate();if(month<10)month=\"0\"+month;if(day<10)day=\"0\"+day;date=year+\"-\"+month+\"-\"+day;// var index = 0;\n// if(schedules !== null && schedules.length > 0) {\n//     // index = schedules[schedules.length-1].id;\n// }\n// const addSchedule = {\n//     calendarId: 2,\n//     category: \"time\",\n//     isAllDay: true,\n//     isVisible: true,\n//     title: \"강의\"+(index+1),\n//     id: index+1,\n//     start: date,\n//     end: date\n// }\nvar addDate={date:date,form_id:0,lecture_date_id:0};// setschedules(schedules.concat(addSchedule));\nprops.setResultDates(props.calendarData.concat(addDate));// eslint-disable-next-line react-hooks/exhaustive-deps\n},[schedules]);var deleteDate=function deleteDate(res){// eslint-disable-next-line no-unused-vars\nvar _res$schedule=res.schedule,id=_res$schedule.id,calendarId=_res$schedule.calendarId;setschedules(schedules.filter(function(e){return e.id!==id;}));var tempData=[];props.calendarData.forEach(function(data,i){if(i+1!==id)tempData.push({lecture_date_id:data.date_id,date:data.date,form_id:data.form_id});});props.setResultDates(tempData);};function _getFormattedTime(time){var date=new Date(time);var h=date.getHours();var m=date.getMinutes();return\"\".concat(h,\":\").concat(m);}function _getTimeTemplate(schedule,isAllDay){var html=[];if(!isAllDay){html.push(\"<strong>\"+_getFormattedTime(schedule.start)+\"</strong> \");}if(schedule.isPrivate){html.push('<span class=\"calendar-font-icon ic-lock-b\"></span>');html.push(\" Private\");}else{if(schedule.isReadOnly){html.push('<span class=\"calendar-font-icon ic-readonly-b\"></span>');}else if(schedule.recurrenceRule){html.push('<span class=\"calendar-font-icon ic-repeat-b\"></span>');}else if(schedule.attendees.length){html.push('<span class=\"calendar-font-icon ic-user-b\"></span>');}else if(schedule.location){html.push('<span class=\"calendar-font-icon ic-location-b\"></span>');}html.push(\" \"+schedule.title);}return html.join(\"\");}var templates={time:function time(schedule){return _getTimeTemplate(schedule,false);}};var NextButton=useCallback(function(e){if(cal!==null){var calendarInstance=cal.current.getInstance();calendarInstance.next();var m=calendarInstance.getDate().getMonth()+1;var y=calendarInstance.getDate().getFullYear();if(m<10)m=\"0\"+m;// var date = y+\"-\"+m;\nsetmonth(m);setyear(y);}},[]);var PrevButton=useCallback(function(e){if(cal!==null){var calendarInstance=cal.current.getInstance();calendarInstance.prev();var m=calendarInstance.getDate().getMonth()+1;var y=calendarInstance.getDate().getFullYear();if(m<10)m=\"0\"+m;// var date = y+\"-\"+m;\nsetmonth(m);setyear(y);// props.readMainCalendar(date)\n}},[]);var TodayButton=useCallback(function(e){if(cal!==null){var calendarInstance=cal.current.getInstance();calendarInstance.today();var m=calendarInstance.getDate().getMonth()+1;var y=calendarInstance.getDate().getFullYear();if(m<10)m=\"0\"+m;// var date = y+\"-\"+m;\nsetmonth(m);setyear(y);}},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"calendar-title\",children:[year,\"\\uB144 \",month,\"\\uC6D4\\uC758 \\uAC15\\uC758\\uC77C\\uC815\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb15\",children:[/*#__PURE__*/_jsx(WhiteButton,{class:\"mr15\",name:\"\\uC624\\uB298\\uB0A0\\uC9DC\",click:TodayButton}),/*#__PURE__*/_jsx(WhiteButton,{class:\"mr15\",name:\"<\",click:PrevButton}),/*#__PURE__*/_jsx(WhiteButton,{name:\">\",click:NextButton})]}),/*#__PURE__*/_jsx(TUICalendar,{ref:cal,height:\"100%\",view:\"month\",useCreationPopup:false,useDetailPopup:true,template:templates,calendars:calendars,schedules:schedules,onClickSchedule:onClickSchedule,onBeforeCreateSchedule:onBeforeCreateSchedule,onBeforeDeleteSchedule:deleteDate// onBeforeUpdateSchedule={onBeforeUpdateSchedule}\n})]});}export default LectureCalendar;","map":{"version":3,"sources":["/Users/moonhahyeon/git/FrontEnd/src/components/modules/calendar/lecture_calendar.js"],"names":["React","useCallback","useRef","useEffect","useState","TUICalendar","WhiteButton","calendarColor","LectureCalendar","props","cal","schedules","setschedules","calendars","setcalendars","year","setyear","month","setmonth","calendarData","data","tempSchedule","i","length","form_id","push","calendarId","category","isAllDay","isVisible","title","id","start","date","end","isReadOnly","academyDates","forEach","index","name","tempCalendar","color","bgColor","dragBgColor","borderColor","today","Date","getFullYear","getMonth","onClickSchedule","e","schedule","current","calendarInst","getElement","onBeforeCreateSchedule","scheduleData","_date","day","getDate","addDate","lecture_date_id","setResultDates","concat","deleteDate","res","filter","tempData","date_id","_getFormattedTime","time","h","getHours","m","getMinutes","_getTimeTemplate","html","isPrivate","recurrenceRule","attendees","location","join","templates","NextButton","calendarInstance","getInstance","next","y","PrevButton","prev","TodayButton"],"mappings":"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","sourcesContent":["import React, { useCallback, useRef, useEffect, useState } from \"react\";\nimport TUICalendar from \"@toast-ui/react-calendar\";\n\nimport \"tui-calendar/dist/tui-calendar.css\";\nimport \"tui-date-picker/dist/tui-date-picker.css\";\nimport '../../../assets/css/calendar.css';\nimport \"tui-time-picker/dist/tui-time-picker.css\";\nimport WhiteButton from '../button/white_button';\n\nconst calendarColor = [\"#000000\",\"#e49d5a\", \"#4285f4\", \"#e4ce5a\" ,\"#c0afff\",\"#9fcae8\",\"#F23DA0\", \"#3C5FA6\", \"#F28705\", \"#467326\", \"#D99066\", \"#ff5722\"];\n\nfunction LectureCalendar(props) {\n    const cal = useRef(null);\n    const [schedules, setschedules] = useState([])\n    const [calendars, setcalendars] = useState([])\n    const [year, setyear] = useState(\"\")\n    const [month, setmonth] = useState(\"\")\n\n    useEffect(() => {\n        if(props.calendarData !== null) {\n            const data = props.calendarData;\n            // var index = 0;\n            var tempSchedule = [];\n            \n            for(var i=0 ; i<data.length ; i++) {\n                if(data[i].form_id === 0) {\n                    tempSchedule.push({\n                        calendarId: 2,\n                        category: \"time\",\n                        isAllDay: true,\n                        isVisible: true,\n                        title: \"강의\"+(i+1),\n                        id: i+1,\n                        start: data[i].date,\n                        end: data[i].date\n                    })\n                } else {\n                    tempSchedule.push({\n                        calendarId: 1,\n                        category: \"time\",\n                        isAllDay: true,\n                        isReadOnly: true,\n                        isVisible: true,\n                        title: \"강의\"+(i+1),\n                        id: i+1,\n                        start: data[i].date,\n                        end: data[i].date\n                    })\n                }\n            }\n\n            if(props.academyDates !== null) {\n                props.academyDates.forEach((data, index) => {\n                    tempSchedule.push({\n                        calendarId: 3,\n                        isAllDay: true,\n                        isVisible: true,\n                        category: \"time\",\n                        isReadOnly: true,\n                        title: data.name,\n                        id: 0,\n                        start: data.date,\n                        end: data.date\n                    })\n                });\n            }\n            \n\n            var tempCalendar  = [];\n            tempCalendar.push({\n                id: 1,\n                name: \"수정 불가\",\n                color: calendarColor[3],\n                bgColor: calendarColor[3]+\"40\",\n                dragBgColor: calendarColor[3]+\"40\",\n                borderColor: calendarColor[3]\n            });\n            tempCalendar.push({\n                id: 2,\n                name: \"수정 가능\",\n                color: calendarColor[2],\n                bgColor: calendarColor[2]+\"40\",\n                dragBgColor: calendarColor[2]+\"40\",\n                borderColor: calendarColor[2]\n            });\n            tempCalendar.push({\n                id: 3,\n                name: \"학사 일정\",\n                color: calendarColor[0],\n                bgColor: calendarColor[0]+\"40\",\n                dragBgColor: calendarColor[0]+\"40\",\n                borderColor: calendarColor[0]\n            });\n            setcalendars(tempCalendar);\n            setschedules(tempSchedule);\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.calendarData])\n\n\n\n    useEffect(() => {\n        let today = new Date();   \n        let year = today.getFullYear(); // 년도\n        let month = today.getMonth() + 1;  // 월\n        // let date = today.getDate();  // 날짜\n        // let day = today.getDay();  // 요일\n\n        if(month < 10)\n            month = \"0\"+month;\n        setyear(year)\n        setmonth(month)\n    }, [])\n\n    const onClickSchedule = useCallback((e) => {\n        const { calendarId, id } = e.schedule;\n        cal.current.calendarInst.getElement(id, calendarId);\n\n    }, []);\n\n\n    const onBeforeCreateSchedule = useCallback((scheduleData) => {\n\n        var date = scheduleData.start._date;\n        var year = date.getFullYear(); \n        var month = date.getMonth() + 1; \n        var day = date.getDate();\n        if(month < 10)\n            month = \"0\"+month;\n        if(day < 10)\n            day = \"0\"+day;\n        date = year+\"-\"+month+\"-\"+day;\n        // var index = 0;\n        // if(schedules !== null && schedules.length > 0) {\n        //     // index = schedules[schedules.length-1].id;\n        // }\n        // const addSchedule = {\n        //     calendarId: 2,\n        //     category: \"time\",\n        //     isAllDay: true,\n        //     isVisible: true,\n        //     title: \"강의\"+(index+1),\n        //     id: index+1,\n        //     start: date,\n        //     end: date\n        // }\n        const addDate = {\n            date:date,\n            form_id:0,\n            lecture_date_id: 0\n        }\n        // setschedules(schedules.concat(addSchedule));\n        props.setResultDates(props.calendarData.concat(addDate));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [schedules]);\n\n    const deleteDate = (res) => {\n        // eslint-disable-next-line no-unused-vars\n        const { id, calendarId } = res.schedule;\n\n        setschedules(schedules.filter((e) => (e.id !== id)))\n        var tempData = [];\n        props.calendarData.forEach((data, i) => {\n            if(i+1 !== id)\n                tempData.push({\n                    lecture_date_id: data.date_id,\n                    date: data.date,\n                    form_id: data.form_id\n                })        \n        });\n        props.setResultDates(tempData);\n    }\n\n    function _getFormattedTime(time) {\n        const date = new Date(time);\n        const h = date.getHours();\n        const m = date.getMinutes();\n\n        return `${h}:${m}`;\n    }\n\n    function _getTimeTemplate(schedule, isAllDay) {\n        var html = [];\n\n        if (!isAllDay) {\n            html.push(\"<strong>\" + _getFormattedTime(schedule.start) + \"</strong> \");\n        }\n        if (schedule.isPrivate) {\n            html.push('<span class=\"calendar-font-icon ic-lock-b\"></span>');\n            html.push(\" Private\");\n        } else {\n            if (schedule.isReadOnly) {\n                html.push('<span class=\"calendar-font-icon ic-readonly-b\"></span>');\n            } else if (schedule.recurrenceRule) {\n                html.push('<span class=\"calendar-font-icon ic-repeat-b\"></span>');\n            } else if (schedule.attendees.length) {\n                html.push('<span class=\"calendar-font-icon ic-user-b\"></span>');\n            } else if (schedule.location) {\n                html.push('<span class=\"calendar-font-icon ic-location-b\"></span>');\n            }\n            html.push(\" \" + schedule.title);\n        }\n\n        return html.join(\"\");\n    }\n\n    const templates = {\n        time: function (schedule) {\n            return _getTimeTemplate(schedule, false);\n        }\n    };\n\n    const NextButton = useCallback((e) => {\n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.next();\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n            // var date = y+\"-\"+m;\n\n            setmonth(m);\n            setyear(y)\n        }\n    }, []);\n\n    const PrevButton = useCallback((e) => {\n\n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.prev();\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n            // var date = y+\"-\"+m;\n\n            setmonth(m);\n            setyear(y)\n\n            // props.readMainCalendar(date)\n        }\n\n        \n    }, []);\n\n    const TodayButton = useCallback((e) => {\n        if (cal !== null) {\n        const calendarInstance = cal.current.getInstance();\n        calendarInstance.today();\n        var m = calendarInstance.getDate().getMonth() + 1;\n        var y = calendarInstance.getDate().getFullYear();\n        if(m < 10)\n            m = \"0\"+m;\n        // var date = y+\"-\"+m;\n\n        setmonth(m);\n        setyear(y)\n        }\n    }, []);\n\n    return (\n        <div>\n        <h2 className=\"calendar-title\">{year}년 {month}월의 강의일정</h2>\n            <div className=\"mb15\">\n                <WhiteButton class=\"mr15\" name=\"오늘날짜\" click={TodayButton}/>\n                <WhiteButton class=\"mr15\" name=\"<\" click={PrevButton}/>\n                <WhiteButton name=\">\" click={NextButton}/>\n            </div>\n            <TUICalendar\n                ref={cal}\n                height=\"100%\"\n                view=\"month\"\n                useCreationPopup={false}\n                useDetailPopup={true}\n                template={templates}\n                calendars={calendars}\n                schedules={schedules}\n                onClickSchedule={onClickSchedule}\n                onBeforeCreateSchedule={onBeforeCreateSchedule}\n                onBeforeDeleteSchedule={deleteDate}\n                // onBeforeUpdateSchedule={onBeforeUpdateSchedule}\n            />\n        </div>\n    );\n}\n\nexport default LectureCalendar;"]},"metadata":{},"sourceType":"module"}