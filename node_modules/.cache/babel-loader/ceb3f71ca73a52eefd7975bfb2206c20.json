{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jeong-yeeun/git/CourseApplicationManagement_frontend/course_application_management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jeong-yeeun/git/CourseApplicationManagement_frontend/course_application_management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jeong-yeeun/git/CourseApplicationManagement_frontend/course_application_management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{GoogleLogin,GoogleLogout}from'react-google-login';import axios from'axios';import'../../../assets/css/header.css';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CommonMenu(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),drawerOpen=_useState2[0],setDrawerOpen=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),submenuOpen=_useState4[0],setSubmenuOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var today=new Date();useEffect(function(){setDrawerOpen(false);setSubmenuOpen(null);},[props.history.location.pathname]);function switchDrawer(){setDrawerOpen(!drawerOpen);}var responseGoogle=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var params,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);params=new URLSearchParams();params.append('token',response.tokenObj.id_token);params.append('email',response.profileObj.email);params.append('expire',response.tokenObj.expires_at);params.append('manageID',window.sessionStorage.getItem('id'));_context.next=8;return axios.post(process.env.REACT_APP_RESTAPI_HOST+'user/login',params);case 8:res=_context.sent;if(parseInt(res.data.status)!==-1){window.sessionStorage.setItem('email',response.profileObj.email);window.sessionStorage.setItem('name',response.profileObj.name);window.sessionStorage.setItem('token',response.tokenObj.id_token);window.sessionStorage.setItem('expires_at',response.tokenObj.expires_at);window.sessionStorage.setItem('status',res.data.status);window.sessionStorage.setItem('id',res.data.id);//window.location.href ='';\n}else{alert(\"로그인 할 수 없습니다. 관리자에게 문의해주세요.\");}setLoading(false);window.location.reload();case 12:case\"end\":return _context.stop();}}},_callee);}));return function responseGoogle(_x){return _ref.apply(this,arguments);};}();var logout=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var params,auth2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);params=new URLSearchParams();params.append('email',window.sessionStorage.getItem('email'));params.append('manageID',window.sessionStorage.getItem('id'));_context2.next=6;return axios.post(process.env.REACT_APP_RESTAPI_HOST+'user/logout',params);case 6:auth2=window.gapi.auth2.getAuthInstance();auth2.signOut().then(function(){window.sessionStorage.removeItem('email');window.sessionStorage.removeItem('name');window.sessionStorage.removeItem('token');window.sessionStorage.removeItem('expires_at');window.sessionStorage.removeItem('id');setLoading(false);window.location.reload();});case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function logout(){return _ref2.apply(this,arguments);};}();var failLogin=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:alert(\"로그인에 실패했습니다.\");case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function failLogin(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{id:\"common-navbar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nav-logo\",children:/*#__PURE__*/_jsx(Link,{to:process.env.REACT_APP_DEFAULT_URL,children:/*#__PURE__*/_jsx(\"img\",{width:\"110px\",alt:\"logo\",src:process.env.REACT_APP_DEFAULT_URL+\"image/black_logo.png\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-title-wrapper\",children:[props.menu!==null?props.menu.map(function(data,index){return/*#__PURE__*/_jsx(Link,{to:process.env.REACT_APP_DEFAULT_URL+data.url,className:\"nav-title\",children:data.name},index);}):null,loading?null:window.sessionStorage.getItem('email')!==null&&window.sessionStorage.getItem('expires_at')>=today.getTime()?/*#__PURE__*/_jsx(GoogleLogout,{clientId:process.env.REACT_APP_GOOGLE_LOGIN,buttonText:\"Logout\",render:function render(renderProps){return/*#__PURE__*/_jsx(\"button\",{className:\"nav-title\",onClick:renderProps.onClick,disabled:renderProps.disabled,children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"});},onLogoutSuccess:logout}):/*#__PURE__*/_jsx(GoogleLogin,{clientId:process.env.REACT_APP_GOOGLE_LOGIN,render:function render(renderProps){return/*#__PURE__*/_jsx(\"button\",{className:\"nav-title\",onClick:renderProps.onClick,disabled:renderProps.disabled,children:\"\\uB85C\\uADF8\\uC778\"});},buttonText:\"Login\",onSuccess:responseGoogle,onFailure:failLogin,cookiePolicy:'single_host_origin'})]})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"common-navbar-mobile\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){switchDrawer();},children:/*#__PURE__*/_jsx(\"img\",{alt:\"logo\",className:\"drawer-toggle-common\",src:process.env.REACT_APP_DEFAULT_URL+\"image/mobile_drawer.png\"})}),/*#__PURE__*/_jsx(\"img\",{alt:\"logo\",width:\"110px\",src:process.env.REACT_APP_DEFAULT_URL+\"image/logo_black.png\"}),/*#__PURE__*/_jsx(\"div\",{})]}),drawerOpen!==false?/*#__PURE__*/_jsx(\"div\",{className:\"drawer-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"drawer-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"drawer-left\",children:[/*#__PURE__*/_jsx(\"ul\",{children:props.menu!==null?props.menu.map(function(data,index){return data.url===\"lecture/subject\"?/*#__PURE__*/_jsx(\"li\",{className:submenuOpen===\"lecture\"?\"active\":\"\",onClick:function onClick(){setSubmenuOpen(\"lecture\");},children:\"\\uAC15\\uC758 \\uBCF4\\uAE30\"}):data.url===\"mypage/profile\"?/*#__PURE__*/_jsx(\"li\",{className:submenuOpen===\"mypage/profile\"?\"active\":\"\",onClick:function onClick(){setSubmenuOpen(\"mypage\");},children:\"\\uB9C8\\uC774 \\uD398\\uC774\\uC9C0\"}):/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+data.url?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+data.url,children:data.name})});}):null}),/*#__PURE__*/_jsxs(\"ul\",{children:[window.sessionStorage.getItem('email')!==null?/*#__PURE__*/_jsxs(\"li\",{className:\"login-name\",children:[window.sessionStorage.getItem('email').split(\"@\")[0],\" \\uB2D8\"]}):/*#__PURE__*/_jsx(\"li\",{className:\"login-name\",children:\"\\uB85C\\uADF8\\uC778\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4.\"}),loading?null:window.sessionStorage.getItem('email')!==null&&window.sessionStorage.getItem('expires_at')>=today.getTime()?/*#__PURE__*/_jsx(GoogleLogout,{clientId:process.env.REACT_APP_GOOGLE_LOGIN,buttonText:\"Logout\",render:function render(renderProps){return/*#__PURE__*/_jsx(\"li\",{className:\"nav-title pointer\",onClick:renderProps.onClick,disabled:renderProps.disabled,children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"});},onLogoutSuccess:logout}):/*#__PURE__*/_jsx(GoogleLogin,{clientId:process.env.REACT_APP_GOOGLE_LOGIN,render:function render(renderProps){return/*#__PURE__*/_jsx(\"li\",{className:\"nav-title pointer\",onClick:renderProps.onClick,disabled:renderProps.disabled,children:\"\\uB85C\\uADF8\\uC778\"});},buttonText:\"Login\",onSuccess:responseGoogle,onFailure:failLogin,cookiePolicy:'single_host_origin'})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"drawer-right\",children:submenuOpen===\"lecture\"?/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+\"lecture/subject\"?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+\"lecture/subject\",children:\"\\uC8FC\\uC81C\\uBCC4\"})}),/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+\"lecture/instructor\"?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+\"lecture/instructor\",children:\"\\uAC15\\uC0AC\\uBCC4\"})}),/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+\"lecture/date\"?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+\"lecture/date\",children:\"\\uB0A0\\uC9DC\\uBCC4\"})})]}):submenuOpen===\"mypage\"?/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+\"mypage/profile\"?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+\"mypage/profile\",children:\"\\uD504\\uB85C\\uD544\"})}),/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+\"mypage/lecture\"?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+\"mypage/lecture\",children:\"\\uB0B4 \\uAC15\\uC758\"})}),/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+\"mypage/contact\"?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+\"mypage/contact\",children:\"\\uCEE8\\uD0DD\\uC77C\\uC9C0\"})}),/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+\"mypage/visitlog\"?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+\"mypage/visitlog\",children:\"\\uBC29\\uBB38\\uC77C\\uC9C0\"})})]}):/*#__PURE__*/_jsx(\"ul\",{})})]})}):/*#__PURE__*/_jsx(\"div\",{})]});}export default CommonMenu;","map":{"version":3,"sources":["/Users/jeong-yeeun/git/CourseApplicationManagement_frontend/course_application_management/src/components/modules/menu/common.js"],"names":["React","useState","useEffect","GoogleLogin","GoogleLogout","axios","Link","CommonMenu","props","drawerOpen","setDrawerOpen","submenuOpen","setSubmenuOpen","loading","setLoading","today","Date","history","location","pathname","switchDrawer","responseGoogle","response","params","URLSearchParams","append","tokenObj","id_token","profileObj","email","expires_at","window","sessionStorage","getItem","post","process","env","REACT_APP_RESTAPI_HOST","res","parseInt","data","status","setItem","name","id","alert","reload","logout","auth2","gapi","getAuthInstance","signOut","then","removeItem","failLogin","REACT_APP_DEFAULT_URL","menu","map","index","url","getTime","REACT_APP_GOOGLE_LOGIN","renderProps","onClick","disabled","split"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport { GoogleLogin,GoogleLogout } from 'react-google-login';\nimport axios from 'axios';\nimport '../../../assets/css/header.css';\nimport { Link } from 'react-router-dom';\n\nfunction CommonMenu(props) {\n    const [drawerOpen, setDrawerOpen] = useState(false);\n    const [submenuOpen, setSubmenuOpen] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const today = new Date();\n\n    useEffect(()=>{\n        setDrawerOpen(false);\n        setSubmenuOpen(null);\n    },[props.history.location.pathname])\n    function switchDrawer() {\n        setDrawerOpen(!drawerOpen);\n    }\n\n    const responseGoogle = async (response) => {\n        setLoading(true);\n        const params = new URLSearchParams()\n        params.append('token', response.tokenObj.id_token);\n        params.append('email', response.profileObj.email);\n        params.append('expire', response.tokenObj.expires_at);\n        params.append('manageID', window.sessionStorage.getItem('id'));\n\n        const res = await axios.post(\n        process.env.REACT_APP_RESTAPI_HOST + 'user/login', params\n        );\n        if(parseInt(res.data.status) !== -1){\n        window.sessionStorage.setItem('email', response.profileObj.email);\n        window.sessionStorage.setItem('name', response.profileObj.name);\n        window.sessionStorage.setItem('token', response.tokenObj.id_token);\n        window.sessionStorage.setItem('expires_at', response.tokenObj.expires_at);\n        window.sessionStorage.setItem('status', res.data.status);\n        window.sessionStorage.setItem('id', res.data.id);\n\n        //window.location.href ='';\n        }else{\n        alert(\"로그인 할 수 없습니다. 관리자에게 문의해주세요.\");\n        }\n        setLoading(false);\n        window.location.reload();\n    }\n\n    const logout = async () => {\n        setLoading(true);\n        const params = new URLSearchParams()\n        params.append('email', window.sessionStorage.getItem('email'));\n        params.append('manageID', window.sessionStorage.getItem('id'));\n\n        await axios.post(\n        process.env.REACT_APP_RESTAPI_HOST + 'user/logout', params\n        );\n\n        const auth2 = window.gapi.auth2.getAuthInstance();\n        auth2.signOut().then(function() {\n        window.sessionStorage.removeItem('email');\n        window.sessionStorage.removeItem('name');\n        window.sessionStorage.removeItem('token');\n        window.sessionStorage.removeItem('expires_at');\n        window.sessionStorage.removeItem('id')\n        setLoading(false);\n        window.location.reload();\n        });\n    }\n\n    const failLogin = async () => {\n        alert(\"로그인에 실패했습니다.\");\n    }\n    return (\n    <div>\n        <div id=\"common-navbar\">\n            <div className=\"nav-logo\">\n                <Link to={process.env.REACT_APP_DEFAULT_URL}><img width=\"110px\" alt=\"logo\" src={process.env.REACT_APP_DEFAULT_URL+\"image/black_logo.png\"}/></Link>\n            </div>\n            <div className=\"nav-title-wrapper\">\n                {props.menu !== null ?\n                    props.menu.map((data, index) => (\n                        <Link key={index} to={process.env.REACT_APP_DEFAULT_URL+data.url} className=\"nav-title\">{data.name}</Link>\n                    ))\n                    : null\n                }\n                {loading ? null:\n                    window.sessionStorage.getItem('email') !== null && window.sessionStorage.getItem('expires_at') >= today.getTime()?    \n                    <GoogleLogout\n                    clientId={process.env.REACT_APP_GOOGLE_LOGIN}\n                    buttonText=\"Logout\"\n                    render={renderProps => (<button className=\"nav-title\" onClick={renderProps.onClick} disabled={renderProps.disabled}>로그아웃</button>)}\n                    onLogoutSuccess={logout}\n                    >\n                    </GoogleLogout>: <GoogleLogin\n                    clientId= {process.env.REACT_APP_GOOGLE_LOGIN}\n                    render={renderProps => (<button className=\"nav-title\" onClick={renderProps.onClick} disabled={renderProps.disabled}>로그인</button>\n                    )}\n                    buttonText=\"Login\"\n                    onSuccess={responseGoogle}\n                    onFailure={failLogin}\n                    cookiePolicy={'single_host_origin'}\n                    />\n                }\n            </div>\n        </div>\n        <div id=\"common-navbar-mobile\">\n            <div onClick = {() => {switchDrawer()}}><img alt=\"logo\" className=\"drawer-toggle-common\" src={process.env.REACT_APP_DEFAULT_URL+\"image/mobile_drawer.png\"}/></div>\n            <img alt=\"logo\" width=\"110px\" src={process.env.REACT_APP_DEFAULT_URL+\"image/logo_black.png\"}/>\n            <div></div>\n        </div>\n        {\n            drawerOpen !== false?\n            <div className=\"drawer-wrapper\">\n                <div className=\"drawer-content\">\n                    <div className=\"drawer-left\">\n                        <ul>\n                        {props.menu !== null ?\n                            props.menu.map((data, index) => \n                                \n                                    data.url === \"lecture/subject\"?\n                                    <li className={submenuOpen === \"lecture\"? \"active\":\"\"} onClick = {() => {setSubmenuOpen(\"lecture\")}}>강의 보기</li>:\n                                    data.url === \"mypage/profile\"?\n                                    <li className={submenuOpen === \"mypage/profile\"? \"active\":\"\"} onClick = {() => {setSubmenuOpen(\"mypage\")}}>마이 페이지</li>:\n                                    <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+data.url? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+data.url}>{data.name}</Link></li>\n\n                            ):null\n                        }\n\n                            {/* <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL}>홈</Link></li>\n                            <li className={submenuOpen === \"lecture\"? \"active\":\"\"} onClick = {() => {setSubmenuOpen(\"lecture\")}}>강의 보기</li>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"admin/main\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"admin/main\"}>관리 페이지 보기</Link></li>\n                            <li className={submenuOpen === \"mypage\"? \"active\":\"\"} onClick = {() => {setSubmenuOpen(\"mypage\")}}>마이 페이지</li> */}\n                        </ul> \n                        <ul>\n                            {\n                                window.sessionStorage.getItem('email') !== null?\n                                <li className=\"login-name\">{window.sessionStorage.getItem('email').split(\"@\")[0]} 님</li>:\n                                <li className=\"login-name\">로그인이 필요합니다.</li>\n                            }\n                            {loading ? null:\n                                window.sessionStorage.getItem('email') !== null && window.sessionStorage.getItem('expires_at') >= today.getTime()?    \n                                <GoogleLogout\n                                clientId={process.env.REACT_APP_GOOGLE_LOGIN}\n                                buttonText=\"Logout\"\n                                render={renderProps => (<li className=\"nav-title pointer\" onClick={renderProps.onClick} disabled={renderProps.disabled}>로그아웃</li>)}\n                                onLogoutSuccess={logout}\n                                >\n                                </GoogleLogout>: <GoogleLogin\n                                clientId= {process.env.REACT_APP_GOOGLE_LOGIN}\n                                render={renderProps => (<li className=\"nav-title pointer\" onClick={renderProps.onClick} disabled={renderProps.disabled}>로그인</li>\n                                )}\n                                buttonText=\"Login\"\n                                onSuccess={responseGoogle}\n                                onFailure={failLogin}\n                                cookiePolicy={'single_host_origin'}\n                                />\n                            }\n                        </ul>\n                    </div>\n                    <div className=\"drawer-right\">\n                        {submenuOpen === \"lecture\"? \n                        <ul>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"lecture/subject\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"lecture/subject\"}>주제별</Link></li>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"lecture/instructor\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"lecture/instructor\"}>강사별</Link></li>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"lecture/date\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"lecture/date\"}>날짜별</Link></li>\n                        </ul>:\n                        submenuOpen === \"mypage\"? \n                        <ul>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"mypage/profile\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"mypage/profile\"}>프로필</Link></li>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"mypage/lecture\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"mypage/lecture\"}>내 강의</Link></li>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"mypage/contact\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"mypage/contact\"}>컨택일지</Link></li>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"mypage/visitlog\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"mypage/visitlog\"}>방문일지</Link></li>\n                        </ul>:\n                        <ul></ul>\n                        }\n                    </div>\n                </div>\n            </div>:\n            <div></div>\n        }\n        {/* <div className=\"main-image\">\n            <img className=\"page-background\" src={backgroundUrl} alt=\"lecture page\" />\n            <div className=\"page-info\">\n                <h2>신청서 작성하기</h2>\n                <p>신청을 통해 듣고 싶은 강의를 우리 교회에서!</p>\n            </div>\n        </div> */}\n        {/* <div className=\"content-wrapper\">\n            <div className=\"left-navbar\">\n                <span className=\"left-active\">\n                    내용1\n                </span>\n                <span>\n                    내용2\n                </span>\n                <span>\n                    내용3\n                </span>\n                <span>\n                    내용4\n                </span>\n            </div>\n            <div className=\"right-content\">\n                right content 입니다\n            </div>\n\n        </div>\n        */}\n    </div>        \n    );\n}\n\nexport default CommonMenu;\n\n"]},"metadata":{},"sourceType":"module"}