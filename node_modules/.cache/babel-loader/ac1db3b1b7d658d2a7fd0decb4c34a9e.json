{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hyerm2/Desktop/project/vision/CourseApplicationManagement_frontend/course_application_management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hyerm2/Desktop/project/vision/CourseApplicationManagement_frontend/course_application_management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/hyerm2/Desktop/project/vision/CourseApplicationManagement_frontend/course_application_management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from'axios';import Pagination from\"react-js-pagination\";import ReactLoading from\"react-loading\";import XLSX from\"xlsx\";import FileSaver from\"file-saver\";import'../../../assets/css/table.css';import'../../../assets/css/default.css';import'../../../assets/css/admin_user.css';import GreyButton from'../../modules/button/admin_grey_btn';import CommonModal from'../../modules/modal/common';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AdminAdministrator(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),adminInfo=_useState2[0],setAdminInfo=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),keyword=_useState4[0],setKeyword=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var postsPerPage=10;var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isModalOpen=_useState8[0],setisModalOpen=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),addEmail=_useState10[0],setAddEmail=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),addName=_useState12[0],setAddName=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),addPhone=_useState14[0],setAddPhone=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),addEmailYN=_useState16[0],setAddEmailYN=_useState16[1];useEffect(function(){readAdministrator();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var readAdministrator=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,_response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(keyword!==null)){_context.next=7;break;}_context.next=3;return axios.get(process.env.REACT_APP_RESTAPI_HOST+'administrator',{params:{keyword:encodeURI(keyword),token:window.sessionStorage.getItem('token'),manageID:window.sessionStorage.getItem('id')}});case 3:response=_context.sent;setAdminInfo(response.data);_context.next=11;break;case 7:_context.next=9;return axios.get(process.env.REACT_APP_RESTAPI_HOST+'administrator',{parmas:{token:window.sessionStorage.getItem('token'),manageID:window.sessionStorage.getItem('id')}});case 9:_response=_context.sent;setAdminInfo(_response.data);case 11:case\"end\":return _context.stop();}}},_callee);}));return function readAdministrator(){return _ref.apply(this,arguments);};}();var editMailYN=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id,value){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(window.confirm(\"이메일 여부를 변경하시겠습니까?\")){axios({url:process.env.REACT_APP_RESTAPI_HOST+'administrator/'+id,method:'put',data:{editValue:value,token:window.sessionStorage.getItem('token'),manageID:window.sessionStorage.getItem('id')}}).then(function(res){alert(\"변경되었습니다.\");//readAdministrator();\n});}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function editMailYN(_x,_x2){return _ref2.apply(this,arguments);};}();var handlePageChange=function handlePageChange(page){setPage(page);};function currentPosts(tmp){var indexOfLast=page*postsPerPage;var indexOfFirst=indexOfLast-postsPerPage;var currentPosts=0;currentPosts=adminInfo.slice(indexOfFirst,indexOfLast);return currentPosts;}var exportToCSV=function exportToCSV(){var fileType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8\";var fileExtension=\".xlsx\";var fileName=\"administrator\";var ws=XLSX.utils.json_to_sheet(adminInfo);var wb={Sheets:{data:ws},SheetNames:[\"data\"]};var excelBuffer=XLSX.write(wb,{bookType:\"xlsx\",type:\"array\"});var data=new Blob([excelBuffer],{type:fileType});FileSaver.saveAs(data,fileName+fileExtension);};var removeAdministrator=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id,email){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(window.confirm(\"삭제하시겠습니까?\")){axios({url:process.env.REACT_APP_RESTAPI_HOST+'administrator/del_date/'+id,method:'put',data:{email:email,token:window.sessionStorage.getItem('token'),manageID:window.sessionStorage.getItem('id')}}).then(function(res){alert(\"변경되었습니다.\");readAdministrator();});}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function removeAdministrator(_x3,_x4){return _ref3.apply(this,arguments);};}();var openModal=function openModal(){setisModalOpen(true);};var closeModal=function closeModal(){setisModalOpen(false);};var createAdministrator=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var params,response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:params=new URLSearchParams();params.append('email',addEmail);params.append('name',addName);params.append('phone',addPhone);params.append('email_yn',addEmailYN);params.append('token',window.sessionStorage.getItem('token'));params.append('manageID',window.sessionStorage.getItem('id'));if(!window.confirm(\"관리자를 추가하시겠습니까?\")){_context4.next=14;break;}_context4.next=10;return axios.post(process.env.REACT_APP_RESTAPI_HOST+'administrator',//[loginID]로그인 후 변경\nparams);case 10:response=_context4.sent;alert(response.data);readAdministrator();closeModal();case 14:case\"end\":return _context4.stop();}}},_callee4);}));return function createAdministrator(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"admin-title-header\",children:\"\\uAD00\\uB9AC\\uC790 \\uAD00\\uB9AC\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-content-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-wrapper mt0 relative\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"table-name mb40\",children:[\"\\uAD00\\uB9AC\\uC790 \\uAD00\\uB9AC\",/*#__PURE__*/_jsx(GreyButton,{class:\"right\",name:\"\\uC5D1\\uC140 \\uD30C\\uC77C \\uB2E4\\uC6B4\\uB85C\\uB4DC\",click:exportToCSV})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb35\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"mr15 p48 w450\",type:\"text\",placeholder:\"\\uAD00\\uB9AC\\uC790 \\uC774\\uB984 or \\uC5F0\\uB77D\\uCC98 or \\uC774\\uBA54\\uC77C\\uB85C \\uD0A4\\uC6CC\\uB4DC \\uAC80\\uC0C9\",onChange:function onChange(e){setKeyword(e.target.value);}}),/*#__PURE__*/_jsx(GreyButton,{name:\"\\uAC80\\uC0C9\",click:readAdministrator}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-add-button\",onClick:openModal,children:\"\\uAD00\\uB9AC\\uC790 \\uCD94\\uAC00\"})]}),/*#__PURE__*/_jsx(CommonModal,{open:isModalOpen,close:closeModal,func:createAdministrator,header:\"\\uAD00\\uB9AC\\uC790 \\uCD94\\uAC00\\uD558\\uAE30\",footer:\"\\uCD94\\uAC00\\uD558\\uAE30\",children:/*#__PURE__*/_jsx(\"div\",{className:\"lecture-info-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p4030\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"lecture-grid-layout2 mb15\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"lecture-info-title\",children:\"\\uC774\\uBA54\\uC77C\"}),/*#__PURE__*/_jsx(\"input\",{className:\"lecture-input mr15\",onChange:function onChange(e){setAddEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"lecture-info-title\",children:\"\\uC774\\uB984\"}),/*#__PURE__*/_jsx(\"input\",{className:\"lecture-input mr15\",onChange:function onChange(e){setAddName(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"lecture-info-title\",children:\"\\uC5F0\\uB77D\\uCC98\"}),/*#__PURE__*/_jsx(\"input\",{className:\"lecture-input mr15\",onChange:function onChange(e){setAddPhone(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"lecture-info-title\",children:\"\\uC774\\uBA54\\uC77C \\uC5EC\\uBD80\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){setAddEmailYN(e.target.value);},defaultValue:\"0\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"O\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"X\"})]})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt50 table-row-admin\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"th user-index\"}),/*#__PURE__*/_jsx(\"span\",{className:\"th\",children:\"\\uC774\\uB984\"}),/*#__PURE__*/_jsx(\"span\",{className:\"th\",children:\"\\uC774\\uBA54\\uC77C\"}),/*#__PURE__*/_jsx(\"span\",{className:\"th user-date\",children:\"\\uC5F0\\uB77D\\uCC98\"}),/*#__PURE__*/_jsx(\"span\",{className:\"th user-access\",children:\"\\uC774\\uBA54\\uC77C \\uC5EC\\uBD80\"})]}),adminInfo!==null?currentPosts(adminInfo).map(function(data,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"table-row-admin\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"td user-index\",children:index+1+(page-1)*postsPerPage}),/*#__PURE__*/_jsx(\"span\",{className:\"td\",children:data.name}),/*#__PURE__*/_jsx(\"span\",{className:\"td\",children:data.email}),/*#__PURE__*/_jsx(\"span\",{className:\"td user-date\",children:data.phone}),/*#__PURE__*/_jsxs(\"span\",{className:\"td user-access\",children:[/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){editMailYN(data.id,e.target.value);},defaultValue:data.emailYN,children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"O\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"X\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-remove-button\",onClick:function onClick(){removeAdministrator(data.id,data.email);},children:\"X\"})]})]},index);}):/*#__PURE__*/_jsx(\"div\",{className:\"lecture-loading\",children:/*#__PURE__*/_jsx(ReactLoading,{type:\"spin\",color:\"rgb(5 88 156 / 47%)\",className:\"lecture-loading-data\",width:\"50px\"})})]}),/*#__PURE__*/_jsx(Pagination,{activePage:page,itemsCountPerPage:postsPerPage,totalItemsCount:adminInfo!==null?adminInfo.length:0,pageRangeDisplayed:5,prevPageText:\"‹\",nextPageText:\"›\",onChange:handlePageChange})]})]});}export default AdminAdministrator;","map":{"version":3,"sources":["/Users/hyerm2/Desktop/project/vision/CourseApplicationManagement_frontend/course_application_management/src/components/pages/admin/administrator.js"],"names":["React","useState","useEffect","axios","Pagination","ReactLoading","XLSX","FileSaver","GreyButton","CommonModal","AdminAdministrator","adminInfo","setAdminInfo","keyword","setKeyword","page","setPage","postsPerPage","isModalOpen","setisModalOpen","addEmail","setAddEmail","addName","setAddName","addPhone","setAddPhone","addEmailYN","setAddEmailYN","readAdministrator","get","process","env","REACT_APP_RESTAPI_HOST","params","encodeURI","token","window","sessionStorage","getItem","manageID","response","data","parmas","editMailYN","id","value","confirm","url","method","editValue","then","res","alert","handlePageChange","currentPosts","tmp","indexOfLast","indexOfFirst","slice","exportToCSV","fileType","fileExtension","fileName","ws","utils","json_to_sheet","wb","Sheets","SheetNames","excelBuffer","write","bookType","type","Blob","saveAs","removeAdministrator","email","openModal","closeModal","createAdministrator","URLSearchParams","append","post","e","target","map","index","name","phone","emailYN","length"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport axios from 'axios';\nimport Pagination from \"react-js-pagination\";\nimport ReactLoading from \"react-loading\";\nimport XLSX from \"xlsx\";\nimport FileSaver from \"file-saver\";\nimport '../../../assets/css/table.css';\nimport '../../../assets/css/default.css';\nimport '../../../assets/css/admin_user.css';\nimport GreyButton from '../../modules/button/admin_grey_btn';\nimport CommonModal from '../../modules/modal/common';\n\nfunction AdminAdministrator() {\n    const [adminInfo, setAdminInfo] = useState(null);\n    const [keyword, setKeyword] = useState(null);\n    const [page, setPage] = useState(1);\n    const postsPerPage = 10;\n    const [isModalOpen, setisModalOpen] = useState(false);\n\n    const [addEmail, setAddEmail] = useState(null);\n    const [addName, setAddName] = useState(null);\n    const [addPhone, setAddPhone] = useState(null);\n    const [addEmailYN, setAddEmailYN] = useState(0)\n\n    useEffect(() => {\n        readAdministrator();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    const readAdministrator = async () => {\n        if(keyword !== null){\n            const response = await axios.get(\n                process.env.REACT_APP_RESTAPI_HOST + 'administrator',\n                {\n                    params: {\n                        keyword: encodeURI(keyword),\n                        token: window.sessionStorage.getItem('token'),\n                        manageID: window.sessionStorage.getItem('id')\n                    },\n                }\n            );\n            setAdminInfo(response.data)\n        }else {\n            const response = await axios.get(\n                process.env.REACT_APP_RESTAPI_HOST + 'administrator', {\n                    parmas: {\n                        token: window.sessionStorage.getItem('token'),\n                        manageID: window.sessionStorage.getItem('id')\n                    }\n                }\n            );\n            setAdminInfo(response.data)\n        }\n    }\n\n    const editMailYN = async (id, value) => {\n        if(window.confirm(\"이메일 여부를 변경하시겠습니까?\")) {\n            axios(\n                {\n                url: process.env.REACT_APP_RESTAPI_HOST+'administrator/'+id,\n                method: 'put',\n                data: {\n                    editValue : value,\n                    token: window.sessionStorage.getItem('token'),\n                    manageID: window.sessionStorage.getItem('id')\n                }\n                }\n            ).then(function(res) {\n                alert(\"변경되었습니다.\");\n                //readAdministrator();\n            })\n        }\n    }\n\n    const handlePageChange = (page) => { \n        setPage(page); \n    };\n\n    function currentPosts(tmp) {\n        var indexOfLast = page * postsPerPage;\n        var indexOfFirst = indexOfLast - postsPerPage;\n\n        let currentPosts = 0;\n        currentPosts = adminInfo.slice(indexOfFirst, indexOfLast);\n        return currentPosts;\n    }\n\n    const exportToCSV = () => {\n        const fileType = \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8\";\n        const fileExtension = \".xlsx\";\n        const fileName = \"administrator\";\n        const ws = XLSX.utils.json_to_sheet(adminInfo);\n        const wb = { Sheets: { data: ws }, SheetNames: [\"data\"] };\n        const excelBuffer = XLSX.write(wb, { bookType: \"xlsx\", type: \"array\" });\n        const data = new Blob([excelBuffer], { type: fileType });\n        FileSaver.saveAs(data, fileName + fileExtension);\n    };\n\n    const removeAdministrator = async(id, email) => {\n        if(window.confirm(\"삭제하시겠습니까?\")) {\n            axios(\n                {\n                url: process.env.REACT_APP_RESTAPI_HOST+'administrator/del_date/'+id,\n                method: 'put',\n                data: {\n                    email : email,\n                    token: window.sessionStorage.getItem('token'),\n                    manageID: window.sessionStorage.getItem('id')\n                }\n                }\n            ).then(function(res) {\n                alert(\"변경되었습니다.\");\n                readAdministrator();\n            })\n        }\n    }\n\n    const openModal = () => {\n        setisModalOpen(true)\n    }\n\n    const closeModal = () => {\n        setisModalOpen(false)\n    }\n\n    const createAdministrator = async() => {\n        var params = new URLSearchParams();\n        params.append('email', addEmail);\n        params.append('name', addName);\n        params.append('phone', addPhone);\n        params.append('email_yn', addEmailYN);\n        params.append('token', window.sessionStorage.getItem('token'));\n        params.append('manageID', window.sessionStorage.getItem('id'));\n\n        if(window.confirm(\"관리자를 추가하시겠습니까?\")) {\n            const response = await axios.post(\n            process.env.REACT_APP_RESTAPI_HOST + 'administrator', //[loginID]로그인 후 변경\n            params,\n            );\n            alert(response.data);\n            readAdministrator();\n            closeModal();\n        }\n    }\n    return (\n        <div>\n            <p className=\"admin-title-header\">관리자 관리</p>\n            <div className=\"admin-content-wrapper\">\n                <div className=\"table-wrapper mt0 relative\">\n                    \n                    <p className=\"table-name mb40\">\n                        관리자 관리\n                        <GreyButton class=\"right\" name=\"엑셀 파일 다운로드\" click={exportToCSV}/>\n                    </p>\n                    \n                    <div className=\"mb35\">\n                        <input className=\"mr15 p48 w450\" type=\"text\" placeholder=\"관리자 이름 or 연락처 or 이메일로 키워드 검색\" onChange={(e) => { setKeyword(e.target.value); }}/>\n                        <GreyButton name=\"검색\" click={readAdministrator}/>\n                        <button  className=\"admin-add-button\" onClick={openModal}>관리자 추가</button>\n                    </div>\n                    <CommonModal open={isModalOpen} close={closeModal} func={createAdministrator} header=\"관리자 추가하기\" footer=\"추가하기\">\n                    <div className=\"lecture-info-wrapper\">\n                            <div className=\"p4030\">\n                                <div className=\"lecture-grid-layout2 mb15\">\n                                    <span className=\"lecture-info-title\">이메일</span>\n                                    <input className=\"lecture-input mr15\" onChange={(e) => {setAddEmail(e.target.value);}}/>\n                                    <span className=\"lecture-info-title\">이름</span>\n                                    <input className=\"lecture-input mr15\"  onChange={(e) => { setAddName(e.target.value); }}/>\n                                    <span className=\"lecture-info-title\">연락처</span>\n                                    <input className=\"lecture-input mr15\" onChange={(e) => {setAddPhone(e.target.value);}}/>\n                                    <span className=\"lecture-info-title\">이메일 여부</span>\n                                    <select onChange={(e) => { setAddEmailYN(e.target.value); }} defaultValue=\"0\">\n                                        <option value = \"1\">O</option>\n                                        <option value = \"0\">X</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                    </CommonModal>\n                    \n                    <div className=\"mt50 table-row-admin\">\n                        <span className=\"th user-index\"></span>\n                        <span className=\"th\">이름</span>\n                        <span className=\"th\">이메일</span>\n                        <span className=\"th user-date\">연락처</span>\n                        <span className=\"th user-access\">이메일 여부</span>\n                    </div>\n                    {adminInfo !== null?\n                        currentPosts(adminInfo).map((data, index) => (\n                            <div className=\"table-row-admin\" key={index}>\n                                <span className=\"td user-index\">{(index+1)+((page-1)*postsPerPage)}</span>\n                                <span className=\"td\">{data.name}</span>\n                                <span className=\"td\">{data.email}</span>\n                                <span className=\"td user-date\">{data.phone}</span>\n                                <span className=\"td user-access\">\n                                    <select onChange={(e) => { editMailYN(data.id, e.target.value); }} defaultValue={data.emailYN}>\n                                        <option value = \"1\">O</option>\n                                        <option value = \"0\">X</option>\n                                    </select>\n                                    <button  className=\"admin-remove-button\" onClick={() => {removeAdministrator(data.id, data.email)}}>X</button>\n                                </span>\n                            </div>\n                        ))\n                        : <div className=\"lecture-loading\"><ReactLoading type=\"spin\" color=\"rgb(5 88 156 / 47%)\" className=\"lecture-loading-data\" width=\"50px\"/></div>\n                    }\n                </div>\n                <Pagination \n                    activePage={page} \n                    itemsCountPerPage={postsPerPage} \n                    totalItemsCount={adminInfo !== null ? adminInfo.length : 0} \n                    pageRangeDisplayed={5} \n                    prevPageText={\"‹\"} \n                    nextPageText={\"›\"} \n                    onChange={handlePageChange} \n                />\n            </div>\n        </div>\n    )\n\n}\n\nexport default AdminAdministrator;"]},"metadata":{},"sourceType":"module"}