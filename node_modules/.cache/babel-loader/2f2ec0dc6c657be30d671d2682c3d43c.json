{"ast":null,"code":"var _jsxFileName = \"/Users/moonhahyeon/git/FrontEnd/src/components/modules/calendar/common.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useRef, useEffect, useState } from \"react\";\nimport TUICalendar from \"@toast-ui/react-calendar\";\nimport \"tui-calendar/dist/tui-calendar.css\";\nimport \"tui-date-picker/dist/tui-date-picker.css\";\nimport '../../../assets/css/calendar.css';\nimport \"tui-time-picker/dist/tui-time-picker.css\";\nimport WhiteButton from '../../modules/button/white_button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst calendarColor = [\"#000000\", \"#e49d5a\", \"#e4ce5a\", \"#4285f4\", \"#c0afff\", \"#9fcae8\", \"#F23DA0\", \"#3C5FA6\", \"#F28705\", \"#467326\", \"#D99066\", \"#ff5722\"];\n\nfunction CommonCalendar(props) {\n  _s();\n\n  const cal = useRef(null);\n  const [schedules, setschedules] = useState([]);\n  const [calendars, setcalendars] = useState([]);\n  const [year, setyear] = useState(null);\n  const [month, setmonth] = useState(null);\n  const [calendarDates, setcalendarDates] = useState(null);\n  useEffect(() => {\n    if (cal !== null) {\n      const calendarInstance = cal.current.getInstance();\n      calendarInstance.today();\n      var m = calendarInstance.getDate().getMonth() + 1;\n      var y = calendarInstance.getDate().getFullYear();\n      if (m < 10) m = \"0\" + m; //var date = y+\"-\"+m;\n\n      setmonth(m);\n      setyear(y);\n    }\n  }, []);\n  useEffect(() => {\n    if (props.resultDates !== null) {\n      setcalendarDates(props.resultDates);\n    }\n  }, [props.resultDates]);\n  useEffect(() => {\n    var dateData = [];\n    schedules.forEach(element => {\n      if (element.calendarId === 1) dateData.push(element.start);\n    });\n    props.setdateData(dateData); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [schedules]);\n  useEffect(() => {\n    if (calendarDates !== null) {\n      var tempSchedule = [];\n      var tempCalendar = [];\n      calendarDates.forEach((date, index) => {\n        tempSchedule.push({\n          calendarId: 1,\n          category: \"time\",\n          isAllDay: true,\n          isVisible: true,\n          title: '강의' + (index + 1),\n          id: index + 1,\n          start: date,\n          end: date\n        });\n      });\n\n      if (props.academyDates !== null) {\n        // var academy_id = tempSchedule[tempSchedule.length-1].id;\n        props.academyDates.forEach((data, index) => {\n          tempSchedule.push({\n            calendarId: 2,\n            isAllDay: true,\n            isVisible: true,\n            category: \"time\",\n            isReadOnly: true,\n            title: data.name,\n            id: 0,\n            start: data.date,\n            end: data.date\n          }); // academy_id++;\n        });\n      }\n\n      setschedules(tempSchedule);\n      tempCalendar.push({\n        id: 1,\n        name: \"강의 시간\",\n        color: calendarColor[3],\n        bgColor: calendarColor[3] + \"40\",\n        dragBgColor: calendarColor[3] + \"40\",\n        borderColor: calendarColor[3]\n      });\n      tempCalendar.push({\n        id: 2,\n        name: \"학사 일정\",\n        color: calendarColor[0],\n        bgColor: calendarColor[0] + \"40\",\n        dragBgColor: calendarColor[0] + \"40\",\n        borderColor: calendarColor[0]\n      });\n      setcalendars(tempCalendar);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [calendarDates]);\n\n  const addLectureDate = data => {\n    var index = 0;\n    schedules.forEach(element => {\n      if (element.id > index) index = element.id;\n    });\n    var date = data.start;\n    var year = date.getFullYear();\n    var month = date.getMonth() + 1;\n    var day = date.getDate();\n    if (month < 10) month = \"0\" + month;\n    if (day < 10) day = \"0\" + day;\n    var lecture_date = year + \"-\" + month + \"-\" + day;\n    const addSchedule = {\n      calendarId: 1,\n      category: \"time\",\n      isAllDay: true,\n      isVisible: true,\n      title: '강의' + (index + 1),\n      id: index + 1,\n      start: lecture_date,\n      end: lecture_date\n    };\n    setschedules(schedules.concat(addSchedule));\n  };\n\n  const deleteLecture = res => {\n    setschedules(schedules.filter(e => e.id !== res.schedule.id));\n  };\n\n  function _getFormattedTime(time) {\n    const date = new Date(time);\n    const h = date.getHours();\n    const m = date.getMinutes();\n    return `${h}:${m}`;\n  }\n\n  function _getTimeTemplate(schedule, isAllDay) {\n    var html = [];\n\n    if (!isAllDay) {\n      html.push(\"<strong>\" + _getFormattedTime(schedule.start) + \"</strong> \");\n    }\n\n    if (schedule.isPrivate) {\n      html.push('<span class=\"calendar-font-icon ic-lock-b\"></span>');\n      html.push(\" Private\");\n    } else {\n      if (schedule.isReadOnly) {\n        html.push('<span class=\"calendar-font-icon ic-readonly-b\"></span>');\n      } else if (schedule.recurrenceRule) {\n        html.push('<span class=\"calendar-font-icon ic-repeat-b\"></span>');\n      } else if (schedule.attendees.length) {\n        html.push('<span class=\"calendar-font-icon ic-user-b\"></span>');\n      } else if (schedule.location) {\n        html.push('<span class=\"calendar-font-icon ic-location-b\"></span>');\n      }\n\n      html.push(\" \" + schedule.title);\n    }\n\n    return html.join(\"\");\n  }\n\n  const templates = {\n    time: function (schedule) {\n      return _getTimeTemplate(schedule, false);\n    }\n  };\n  const NextButton = useCallback(e => {\n    if (cal !== null) {\n      const calendarInstance = cal.current.getInstance();\n      calendarInstance.next();\n      var m = calendarInstance.getDate().getMonth() + 1;\n      var y = calendarInstance.getDate().getFullYear();\n      if (m < 10) m = \"0\" + m;\n      setmonth(m);\n      setyear(y);\n    }\n  }, []);\n  const PrevButton = useCallback(e => {\n    if (cal !== null) {\n      const calendarInstance = cal.current.getInstance();\n      calendarInstance.prev();\n      var m = calendarInstance.getDate().getMonth() + 1;\n      var y = calendarInstance.getDate().getFullYear();\n      if (m < 10) m = \"0\" + m; // var date = y+\"-\"+m;\n\n      setmonth(m);\n      setyear(y);\n    }\n  }, []);\n  const TodayButton = useCallback(e => {\n    if (cal !== null) {\n      const calendarInstance = cal.current.getInstance();\n      calendarInstance.today();\n      var m = calendarInstance.getDate().getMonth() + 1;\n      var y = calendarInstance.getDate().getFullYear();\n      if (m < 10) m = \"0\" + m; // var date = y+\"-\"+m;\n\n      setmonth(m);\n      setyear(y);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"calendar-title\",\n      children: [year, \"\\uB144 \", month, \"\\uC6D4\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb15\",\n      children: [/*#__PURE__*/_jsxDEV(WhiteButton, {\n        class: \"mr15\",\n        name: \"\\uC624\\uB298\\uB0A0\\uC9DC\",\n        click: TodayButton\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(WhiteButton, {\n        class: \"mr15\",\n        name: \"<\",\n        click: PrevButton\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(WhiteButton, {\n        name: \">\",\n        click: NextButton\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TUICalendar, {\n      ref: cal,\n      height: \"100%\",\n      view: \"month\",\n      useCreationPopup: false,\n      useDetailPopup: true,\n      template: templates,\n      calendars: calendars,\n      schedules: schedules,\n      onBeforeCreateSchedule: addLectureDate,\n      onBeforeDeleteSchedule: deleteLecture // onBeforeUpdateSchedule={updateLecture}\n\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 237,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CommonCalendar, \"Ta9rs1vX3hIZemuEktYuEk9ZXWc=\");\n\n_c = CommonCalendar;\nexport default CommonCalendar;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommonCalendar\");","map":{"version":3,"sources":["/Users/moonhahyeon/git/FrontEnd/src/components/modules/calendar/common.js"],"names":["React","useCallback","useRef","useEffect","useState","TUICalendar","WhiteButton","calendarColor","CommonCalendar","props","cal","schedules","setschedules","calendars","setcalendars","year","setyear","month","setmonth","calendarDates","setcalendarDates","calendarInstance","current","getInstance","today","m","getDate","getMonth","y","getFullYear","resultDates","dateData","forEach","element","calendarId","push","start","setdateData","tempSchedule","tempCalendar","date","index","category","isAllDay","isVisible","title","id","end","academyDates","data","isReadOnly","name","color","bgColor","dragBgColor","borderColor","addLectureDate","day","lecture_date","addSchedule","concat","deleteLecture","res","filter","e","schedule","_getFormattedTime","time","Date","h","getHours","getMinutes","_getTimeTemplate","html","isPrivate","recurrenceRule","attendees","length","location","join","templates","NextButton","next","PrevButton","prev","TodayButton"],"mappings":"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","sourcesContent":["import React, { useCallback, useRef, useEffect, useState } from \"react\";\n\nimport TUICalendar from \"@toast-ui/react-calendar\";\n\nimport \"tui-calendar/dist/tui-calendar.css\";\nimport \"tui-date-picker/dist/tui-date-picker.css\";\nimport '../../../assets/css/calendar.css';\nimport \"tui-time-picker/dist/tui-time-picker.css\";\nimport WhiteButton from '../../modules/button/white_button';\n\nconst calendarColor = [\"#000000\",\"#e49d5a\", \"#e4ce5a\", \"#4285f4\" ,\"#c0afff\",\"#9fcae8\",\"#F23DA0\", \"#3C5FA6\", \"#F28705\", \"#467326\", \"#D99066\", \"#ff5722\"];\n\nfunction CommonCalendar(props) {\n    const cal = useRef(null);\n    const [schedules, setschedules] = useState([])\n    const [calendars, setcalendars] = useState([])\n    const [year, setyear] = useState(null)\n    const [month, setmonth] = useState(null)\n    const [calendarDates, setcalendarDates] = useState(null);\n\n\n    useEffect(() => {\n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.today();\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n            //var date = y+\"-\"+m;\n\n            setmonth(m);\n            setyear(y);\n        }\n    }, [])\n\n    useEffect(() => {\n        if(props.resultDates !== null) {\n            setcalendarDates(props.resultDates);\n        }\n    }, [props.resultDates])\n\n\n    useEffect(() => {\n        var dateData = [];\n        schedules.forEach(element => {\n            if(element.calendarId === 1)\n                dateData.push(element.start);\n        });\n        props.setdateData(dateData);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [schedules])\n\n    useEffect(() => {\n        if(calendarDates !== null) {\n            var tempSchedule = [];\n            var tempCalendar = [];\n            calendarDates.forEach((date, index) => {\n                tempSchedule.push({\n                    calendarId: 1,\n                    category:\"time\",\n                    isAllDay: true,\n                    isVisible: true,\n                    title: '강의'+(index+1),\n                    id: index+1,\n                    start: date,\n                    end: date\n                })\n            });\n\n            if(props.academyDates !== null) {\n                // var academy_id = tempSchedule[tempSchedule.length-1].id;\n                props.academyDates.forEach((data, index) => {\n                    tempSchedule.push({\n                        calendarId: 2,\n                        isAllDay: true,\n                        isVisible: true,\n                        category: \"time\",\n                        isReadOnly: true,\n                        title: data.name,\n                        id: 0,\n                        start: data.date,\n                        end: data.date\n                    })\n                    // academy_id++;\n                });\n            }\n            setschedules(tempSchedule);\n\n            tempCalendar.push({\n                id: 1,\n                name: \"강의 시간\",\n                color: calendarColor[3],\n                bgColor: calendarColor[3]+\"40\",\n                dragBgColor: calendarColor[3]+\"40\",\n                borderColor: calendarColor[3]\n            });\n            tempCalendar.push({\n                id: 2,\n                name: \"학사 일정\",\n                color: calendarColor[0],\n                bgColor: calendarColor[0]+\"40\",\n                dragBgColor: calendarColor[0]+\"40\",\n                borderColor: calendarColor[0]\n            })\n            setcalendars(tempCalendar);\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [calendarDates])\n\n    const addLectureDate = (data) => {\n        var index = 0;\n        schedules.forEach(element => {\n            if(element.id > index)\n                index = element.id;\n        });\n        var date = data.start;\n        var year = date.getFullYear(); \n        var month = date.getMonth() + 1; \n        var day = date.getDate();\n        if(month < 10)\n            month = \"0\"+month;\n        if(day < 10)\n            day = \"0\"+day;\n        var lecture_date = year+\"-\"+month+\"-\"+day\n        \n        const addSchedule = {\n            calendarId: 1,\n            category:\"time\",\n            isAllDay: true,\n            isVisible: true,\n            title: '강의'+(index+1),\n            id: index+1,\n            start: lecture_date,\n            end: lecture_date\n        };\n        setschedules(schedules.concat(addSchedule));\n    }\n\n    const deleteLecture = (res) => {\n        setschedules(schedules.filter((e) => (e.id !== res.schedule.id)))\n    }\n\n    function _getFormattedTime(time) {\n        const date = new Date(time);\n        const h = date.getHours();\n        const m = date.getMinutes();\n\n        return `${h}:${m}`;\n    }\n\n    function _getTimeTemplate(schedule, isAllDay) {\n        var html = [];\n\n        if (!isAllDay) {\n            html.push(\"<strong>\" + _getFormattedTime(schedule.start) + \"</strong> \");\n        }\n        if (schedule.isPrivate) {\n            html.push('<span class=\"calendar-font-icon ic-lock-b\"></span>');\n            html.push(\" Private\");\n        } else {\n            if (schedule.isReadOnly) {\n                html.push('<span class=\"calendar-font-icon ic-readonly-b\"></span>');\n            } else if (schedule.recurrenceRule) {\n                html.push('<span class=\"calendar-font-icon ic-repeat-b\"></span>');\n            } else if (schedule.attendees.length) {\n                html.push('<span class=\"calendar-font-icon ic-user-b\"></span>');\n            } else if (schedule.location) {\n                html.push('<span class=\"calendar-font-icon ic-location-b\"></span>');\n            }\n            html.push(\" \" + schedule.title);\n        }\n\n        return html.join(\"\");\n    }\n\n    const templates = {\n        time: function (schedule) {\n            return _getTimeTemplate(schedule, false);\n        }\n    };\n\n\n    const NextButton = useCallback((e) => {\n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.next();\n\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n\n            setmonth(m);\n            setyear(y);\n\n        }\n    }, []);\n\n    const PrevButton = useCallback((e) => {\n        \n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.prev();\n\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n            // var date = y+\"-\"+m;\n\n            setmonth(m);\n            setyear(y)\n\n        }\n    }, []);\n\n    const TodayButton = useCallback((e) => {\n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.today();\n\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n            // var date = y+\"-\"+m;\n\n            setmonth(m);\n            setyear(y)\n\n        }\n    }, []);\n\n    return (\n        <div>\n        \n        <h2 className=\"calendar-title\">{year}년 {month}월</h2>\n       \n            <div className=\"mb15\">\n                <WhiteButton class=\"mr15\" name=\"오늘날짜\" click={TodayButton}/>\n                <WhiteButton class=\"mr15\" name=\"<\" click={PrevButton}/>\n                <WhiteButton name=\">\" click={NextButton}/>\n            </div>\n            \n            <TUICalendar\n                ref={cal}\n                height=\"100%\"\n                view=\"month\"\n                useCreationPopup={false}\n                useDetailPopup={true}\n                template={templates}\n                calendars={calendars}\n                schedules={schedules}\n                onBeforeCreateSchedule={addLectureDate}\n                onBeforeDeleteSchedule={deleteLecture}\n                // onBeforeUpdateSchedule={updateLecture}\n            />\n        </div>\n    );\n}\n\nexport default CommonCalendar;"]},"metadata":{},"sourceType":"module"}