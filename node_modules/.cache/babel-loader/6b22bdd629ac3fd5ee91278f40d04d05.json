{"ast":null,"code":"import _slicedToArray from\"/Users/hyerm2/Desktop/project/vision/CourseApplicationManagement_frontend/course_application_management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useRef,useEffect,useState}from\"react\";import TUICalendar from\"@toast-ui/react-calendar\";import\"tui-calendar/dist/tui-calendar.css\";import\"tui-date-picker/dist/tui-date-picker.css\";import'../../../assets/css/calendar.css';import\"tui-time-picker/dist/tui-time-picker.css\";import WhiteButton from'../../modules/button/white_button';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var calendarColor=[\"#000000\",\"#e49d5a\",\"#e4ce5a\",\"#4285f4\",\"#c0afff\",\"#9fcae8\",\"#F23DA0\",\"#3C5FA6\",\"#F28705\",\"#467326\",\"#D99066\",\"#ff5722\"];function CommonCalendar(props){var cal=useRef(null);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),schedules=_useState2[0],setschedules=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),calendars=_useState4[0],setcalendars=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),year=_useState6[0],setyear=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),month=_useState8[0],setmonth=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),calendarDates=_useState10[0],setcalendarDates=_useState10[1];useEffect(function(){if(cal!==null){var calendarInstance=cal.current.getInstance();calendarInstance.today();var m=calendarInstance.getDate().getMonth()+1;var y=calendarInstance.getDate().getFullYear();if(m<10)m=\"0\"+m;//var date = y+\"-\"+m;\nsetmonth(m);setyear(y);}},[]);useEffect(function(){if(props.resultDates!==null){setcalendarDates(props.resultDates);}},[props.resultDates]);useEffect(function(){var dateData=[];schedules.forEach(function(element){if(element.calendarId===1)dateData.push(element.start);});props.setdateData(dateData);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[schedules]);useEffect(function(){if(calendarDates!==null){var tempSchedule=[];var tempCalendar=[];calendarDates.forEach(function(date,index){tempSchedule.push({calendarId:1,category:\"time\",isAllDay:true,isVisible:true,title:'강의'+(index+1),id:index+1,start:date,end:date});});if(props.academyDates!==null){// var academy_id = tempSchedule[tempSchedule.length-1].id;\nprops.academyDates.forEach(function(data,index){tempSchedule.push({calendarId:2,isAllDay:true,isVisible:true,category:\"time\",isReadOnly:true,title:data.name,id:0,start:data.date,end:data.date});// academy_id++;\n});}setschedules(tempSchedule);tempCalendar.push({id:1,name:\"강의 시간\",color:calendarColor[3],bgColor:calendarColor[3]+\"40\",dragBgColor:calendarColor[3]+\"40\",borderColor:calendarColor[3]});tempCalendar.push({id:2,name:\"학사 일정\",color:calendarColor[0],bgColor:calendarColor[0]+\"40\",dragBgColor:calendarColor[0]+\"40\",borderColor:calendarColor[0]});setcalendars(tempCalendar);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[calendarDates]);var addLectureDate=function addLectureDate(data){var index=0;schedules.forEach(function(element){if(element.id>index)index=element.id;});var date=data.start;var year=date.getFullYear();var month=date.getMonth()+1;var day=date.getDate();if(month<10)month=\"0\"+month;if(day<10)day=\"0\"+day;var lecture_date=year+\"-\"+month+\"-\"+day;var addSchedule={calendarId:1,category:\"time\",isAllDay:true,isVisible:true,title:'강의'+(index+1),id:index+1,start:lecture_date,end:lecture_date};setschedules(schedules.concat(addSchedule));};var deleteLecture=function deleteLecture(res){setschedules(schedules.filter(function(e){return e.id!==res.schedule.id;}));};function _getFormattedTime(time){var date=new Date(time);var h=date.getHours();var m=date.getMinutes();return\"\".concat(h,\":\").concat(m);}function _getTimeTemplate(schedule,isAllDay){var html=[];if(!isAllDay){html.push(\"<strong>\"+_getFormattedTime(schedule.start)+\"</strong> \");}if(schedule.isPrivate){html.push('<span class=\"calendar-font-icon ic-lock-b\"></span>');html.push(\" Private\");}else{if(schedule.isReadOnly){html.push('<span class=\"calendar-font-icon ic-readonly-b\"></span>');}else if(schedule.recurrenceRule){html.push('<span class=\"calendar-font-icon ic-repeat-b\"></span>');}else if(schedule.attendees.length){html.push('<span class=\"calendar-font-icon ic-user-b\"></span>');}else if(schedule.location){html.push('<span class=\"calendar-font-icon ic-location-b\"></span>');}html.push(\" \"+schedule.title);}return html.join(\"\");}var templates={time:function time(schedule){return _getTimeTemplate(schedule,false);}};var NextButton=useCallback(function(e){if(cal!==null){var calendarInstance=cal.current.getInstance();calendarInstance.next();var m=calendarInstance.getDate().getMonth()+1;var y=calendarInstance.getDate().getFullYear();if(m<10)m=\"0\"+m;setmonth(m);setyear(y);}},[]);var PrevButton=useCallback(function(e){if(cal!==null){var calendarInstance=cal.current.getInstance();calendarInstance.prev();var m=calendarInstance.getDate().getMonth()+1;var y=calendarInstance.getDate().getFullYear();if(m<10)m=\"0\"+m;// var date = y+\"-\"+m;\nsetmonth(m);setyear(y);}},[]);var TodayButton=useCallback(function(e){if(cal!==null){var calendarInstance=cal.current.getInstance();calendarInstance.today();var m=calendarInstance.getDate().getMonth()+1;var y=calendarInstance.getDate().getFullYear();if(m<10)m=\"0\"+m;// var date = y+\"-\"+m;\nsetmonth(m);setyear(y);}},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"calendar-title\",children:[year,\"\\uB144 \",month,\"\\uC6D4\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb15\",children:[/*#__PURE__*/_jsx(WhiteButton,{class:\"mr15\",name:\"\\uC624\\uB298\\uB0A0\\uC9DC\",click:TodayButton}),/*#__PURE__*/_jsx(WhiteButton,{class:\"mr15\",name:\"<\",click:PrevButton}),/*#__PURE__*/_jsx(WhiteButton,{name:\">\",click:NextButton})]}),/*#__PURE__*/_jsx(TUICalendar,{ref:cal,height:\"100%\",view:\"month\",useCreationPopup:false,useDetailPopup:true,template:templates,calendars:calendars,schedules:schedules,onBeforeCreateSchedule:addLectureDate,onBeforeDeleteSchedule:deleteLecture// onBeforeUpdateSchedule={updateLecture}\n})]});}export default CommonCalendar;","map":{"version":3,"sources":["/Users/hyerm2/Desktop/project/vision/CourseApplicationManagement_frontend/course_application_management/src/components/modules/calendar/common.js"],"names":["React","useCallback","useRef","useEffect","useState","TUICalendar","WhiteButton","calendarColor","CommonCalendar","props","cal","schedules","setschedules","calendars","setcalendars","year","setyear","month","setmonth","calendarDates","setcalendarDates","calendarInstance","current","getInstance","today","m","getDate","getMonth","y","getFullYear","resultDates","dateData","forEach","element","calendarId","push","start","setdateData","tempSchedule","tempCalendar","date","index","category","isAllDay","isVisible","title","id","end","academyDates","data","isReadOnly","name","color","bgColor","dragBgColor","borderColor","addLectureDate","day","lecture_date","addSchedule","concat","deleteLecture","res","filter","e","schedule","_getFormattedTime","time","Date","h","getHours","getMinutes","_getTimeTemplate","html","isPrivate","recurrenceRule","attendees","length","location","join","templates","NextButton","next","PrevButton","prev","TodayButton"],"mappings":"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","sourcesContent":["import React, { useCallback, useRef, useEffect, useState } from \"react\";\n\nimport TUICalendar from \"@toast-ui/react-calendar\";\n\nimport \"tui-calendar/dist/tui-calendar.css\";\nimport \"tui-date-picker/dist/tui-date-picker.css\";\nimport '../../../assets/css/calendar.css';\nimport \"tui-time-picker/dist/tui-time-picker.css\";\nimport WhiteButton from '../../modules/button/white_button';\n\nconst calendarColor = [\"#000000\",\"#e49d5a\", \"#e4ce5a\", \"#4285f4\" ,\"#c0afff\",\"#9fcae8\",\"#F23DA0\", \"#3C5FA6\", \"#F28705\", \"#467326\", \"#D99066\", \"#ff5722\"];\n\nfunction CommonCalendar(props) {\n    const cal = useRef(null);\n    const [schedules, setschedules] = useState([])\n    const [calendars, setcalendars] = useState([])\n    const [year, setyear] = useState(null)\n    const [month, setmonth] = useState(null)\n    const [calendarDates, setcalendarDates] = useState(null);\n\n\n    useEffect(() => {\n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.today();\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n            //var date = y+\"-\"+m;\n\n            setmonth(m);\n            setyear(y);\n        }\n    }, [])\n\n    useEffect(() => {\n        if(props.resultDates !== null) {\n            setcalendarDates(props.resultDates);\n        }\n    }, [props.resultDates])\n\n\n    useEffect(() => {\n        var dateData = [];\n        schedules.forEach(element => {\n            if(element.calendarId === 1)\n                dateData.push(element.start);\n        });\n        props.setdateData(dateData);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [schedules])\n\n    useEffect(() => {\n        if(calendarDates !== null) {\n            var tempSchedule = [];\n            var tempCalendar = [];\n            calendarDates.forEach((date, index) => {\n                tempSchedule.push({\n                    calendarId: 1,\n                    category:\"time\",\n                    isAllDay: true,\n                    isVisible: true,\n                    title: '강의'+(index+1),\n                    id: index+1,\n                    start: date,\n                    end: date\n                })\n            });\n\n            if(props.academyDates !== null) {\n                // var academy_id = tempSchedule[tempSchedule.length-1].id;\n                props.academyDates.forEach((data, index) => {\n                    tempSchedule.push({\n                        calendarId: 2,\n                        isAllDay: true,\n                        isVisible: true,\n                        category: \"time\",\n                        isReadOnly: true,\n                        title: data.name,\n                        id: 0,\n                        start: data.date,\n                        end: data.date\n                    })\n                    // academy_id++;\n                });\n            }\n            setschedules(tempSchedule);\n\n            tempCalendar.push({\n                id: 1,\n                name: \"강의 시간\",\n                color: calendarColor[3],\n                bgColor: calendarColor[3]+\"40\",\n                dragBgColor: calendarColor[3]+\"40\",\n                borderColor: calendarColor[3]\n            });\n            tempCalendar.push({\n                id: 2,\n                name: \"학사 일정\",\n                color: calendarColor[0],\n                bgColor: calendarColor[0]+\"40\",\n                dragBgColor: calendarColor[0]+\"40\",\n                borderColor: calendarColor[0]\n            })\n            setcalendars(tempCalendar);\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [calendarDates])\n\n    const addLectureDate = (data) => {\n        var index = 0;\n        schedules.forEach(element => {\n            if(element.id > index)\n                index = element.id;\n        });\n        var date = data.start;\n        var year = date.getFullYear(); \n        var month = date.getMonth() + 1; \n        var day = date.getDate();\n        if(month < 10)\n            month = \"0\"+month;\n        if(day < 10)\n            day = \"0\"+day;\n        var lecture_date = year+\"-\"+month+\"-\"+day\n        \n        const addSchedule = {\n            calendarId: 1,\n            category:\"time\",\n            isAllDay: true,\n            isVisible: true,\n            title: '강의'+(index+1),\n            id: index+1,\n            start: lecture_date,\n            end: lecture_date\n        };\n        setschedules(schedules.concat(addSchedule));\n    }\n\n    const deleteLecture = (res) => {\n        setschedules(schedules.filter((e) => (e.id !== res.schedule.id)))\n    }\n\n    function _getFormattedTime(time) {\n        const date = new Date(time);\n        const h = date.getHours();\n        const m = date.getMinutes();\n\n        return `${h}:${m}`;\n    }\n\n    function _getTimeTemplate(schedule, isAllDay) {\n        var html = [];\n\n        if (!isAllDay) {\n            html.push(\"<strong>\" + _getFormattedTime(schedule.start) + \"</strong> \");\n        }\n        if (schedule.isPrivate) {\n            html.push('<span class=\"calendar-font-icon ic-lock-b\"></span>');\n            html.push(\" Private\");\n        } else {\n            if (schedule.isReadOnly) {\n                html.push('<span class=\"calendar-font-icon ic-readonly-b\"></span>');\n            } else if (schedule.recurrenceRule) {\n                html.push('<span class=\"calendar-font-icon ic-repeat-b\"></span>');\n            } else if (schedule.attendees.length) {\n                html.push('<span class=\"calendar-font-icon ic-user-b\"></span>');\n            } else if (schedule.location) {\n                html.push('<span class=\"calendar-font-icon ic-location-b\"></span>');\n            }\n            html.push(\" \" + schedule.title);\n        }\n\n        return html.join(\"\");\n    }\n\n    const templates = {\n        time: function (schedule) {\n            return _getTimeTemplate(schedule, false);\n        }\n    };\n\n\n    const NextButton = useCallback((e) => {\n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.next();\n\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n\n            setmonth(m);\n            setyear(y);\n\n        }\n    }, []);\n\n    const PrevButton = useCallback((e) => {\n        \n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.prev();\n\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n            // var date = y+\"-\"+m;\n\n            setmonth(m);\n            setyear(y)\n\n        }\n    }, []);\n\n    const TodayButton = useCallback((e) => {\n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.today();\n\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n            // var date = y+\"-\"+m;\n\n            setmonth(m);\n            setyear(y)\n\n        }\n    }, []);\n\n    return (\n        <div>\n        \n        <h2 className=\"calendar-title\">{year}년 {month}월</h2>\n       \n            <div className=\"mb15\">\n                <WhiteButton class=\"mr15\" name=\"오늘날짜\" click={TodayButton}/>\n                <WhiteButton class=\"mr15\" name=\"<\" click={PrevButton}/>\n                <WhiteButton name=\">\" click={NextButton}/>\n            </div>\n            \n            <TUICalendar\n                ref={cal}\n                height=\"100%\"\n                view=\"month\"\n                useCreationPopup={false}\n                useDetailPopup={true}\n                template={templates}\n                calendars={calendars}\n                schedules={schedules}\n                onBeforeCreateSchedule={addLectureDate}\n                onBeforeDeleteSchedule={deleteLecture}\n                // onBeforeUpdateSchedule={updateLecture}\n            />\n        </div>\n    );\n}\n\nexport default CommonCalendar;"]},"metadata":{},"sourceType":"module"}