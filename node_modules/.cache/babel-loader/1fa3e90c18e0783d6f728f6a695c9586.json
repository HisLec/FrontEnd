{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jeong-yeeun/git/CourseApplicationManagement_frontend/course_application_management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jeong-yeeun/git/CourseApplicationManagement_frontend/course_application_management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jeong-yeeun/git/CourseApplicationManagement_frontend/course_application_management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{GoogleLogin,GoogleLogout}from'react-google-login';import axios from'axios';import'../../../assets/css/header.css';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MainMenu(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),drawerOpen=_useState2[0],setDrawerOpen=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),submenuOpen=_useState4[0],setSubmenuOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var today=new Date();useEffect(function(){setDrawerOpen(false);setSubmenuOpen(null);},[props.history.location.pathname]);function switchDrawer(){setDrawerOpen(!drawerOpen);}var responseGoogle=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var params,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);params=new URLSearchParams();params.append('token',response.tokenObj.id_token);params.append('email',response.profileObj.email);params.append('expire',response.tokenObj.expires_at);_context.next=7;return axios.post(process.env.REACT_APP_RESTAPI_HOST+'user/login',params);case 7:res=_context.sent;if(res.data!==\"fail\"){window.sessionStorage.setItem('email',response.profileObj.email);window.sessionStorage.setItem('name',response.profileObj.name);window.sessionStorage.setItem('token',response.tokenObj.id_token);window.sessionStorage.setItem('expires_at',response.tokenObj.expires_at);window.sessionStorage.setItem('status',res.data.status);window.sessionStorage.setItem('id',res.data.id);window.location.reload();}else{alert(\"로그인 할 수 없습니다. 관리자에게 문의해주세요.\");}setLoading(false);case 10:case\"end\":return _context.stop();}}},_callee);}));return function responseGoogle(_x){return _ref.apply(this,arguments);};}();var logout=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var params,auth2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);params=new URLSearchParams();params.append('email',window.sessionStorage.getItem('email'));_context2.next=5;return axios.post(process.env.REACT_APP_RESTAPI_HOST+'user/logout',params);case 5:auth2=window.gapi.auth2.getAuthInstance();auth2.signOut().then(function(){window.sessionStorage.removeItem('email');window.sessionStorage.removeItem('name');window.sessionStorage.removeItem('token');window.sessionStorage.removeItem('expires_at');setLoading(false);window.location.reload();});case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function logout(){return _ref2.apply(this,arguments);};}();var failLogin=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:alert(\"로그인에 실패했습니다.\");case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function failLogin(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{id:\"main-navbar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nav-logo\",children:/*#__PURE__*/_jsx(\"img\",{width:\"110px\",alt:\"logo\",src:process.env.REACT_APP_DEFAULT_URL+\"image/logo.png\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-title-wrapper\",children:[props.menu!==null?props.menu.map(function(data,index){return/*#__PURE__*/_jsx(Link,{to:process.env.REACT_APP_DEFAULT_URL+data.url,className:\"nav-title\",children:data.name},index);}):null,loading?null:window.sessionStorage.getItem(\"token\")!==null&&window.sessionStorage.getItem('expires_at')>=today.getTime()?/*#__PURE__*/_jsx(GoogleLogout,{clientId:process.env.REACT_APP_GOOGLE_LOGIN,buttonText:\"Logout\",render:function render(renderProps){return/*#__PURE__*/_jsx(\"button\",{className:\"nav-title\",onClick:renderProps.onClick,disabled:renderProps.disabled,children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"});},onLogoutSuccess:logout}):/*#__PURE__*/_jsx(GoogleLogin,{clientId:process.env.REACT_APP_GOOGLE_LOGIN,render:function render(renderProps){return/*#__PURE__*/_jsx(\"button\",{className:\"nav-title\",onClick:renderProps.onClick,disabled:renderProps.disabled,children:\"\\uB85C\\uADF8\\uC778\"});},buttonText:\"Login\",onSuccess:responseGoogle,onFailure:failLogin,cookiePolicy:'single_host_origin'})]})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"main-navbar-mobile\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){switchDrawer();},children:[\" \",/*#__PURE__*/_jsx(\"img\",{alt:\"logo\",className:\"drawer-toggle\",src:process.env.REACT_APP_DEFAULT_URL+\"image/mobile_drawer.png\"})]}),/*#__PURE__*/_jsx(\"img\",{alt:\"logo\",width:\"110px\",src:process.env.REACT_APP_DEFAULT_URL+\"image/logo_black.png\"}),/*#__PURE__*/_jsx(\"div\",{})]}),drawerOpen!==false?/*#__PURE__*/_jsx(\"div\",{className:\"drawer-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"drawer-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"drawer-left\",children:[/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL,children:\"\\uD648\"})}),props.menu!==null?props.menu.map(function(data,index){return data.url===\"lecture/subject\"?/*#__PURE__*/_jsx(\"li\",{className:submenuOpen===\"lecture\"?\"active\":\"\",onClick:function onClick(){setSubmenuOpen(\"lecture\");},children:\"\\uAC15\\uC758 \\uBCF4\\uAE30\"}):data.url===\"mypage/profile\"?/*#__PURE__*/_jsx(\"li\",{className:submenuOpen===\"mypage/profile\"?\"active\":\"\",onClick:function onClick(){setSubmenuOpen(\"mypage\");},children:\"\\uB9C8\\uC774 \\uD398\\uC774\\uC9C0\"}):/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+data.url?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+data.url,children:data.name})});}):null]}),loading?null:window.sessionStorage.getItem(\"token\")!==null&&window.sessionStorage.getItem('expires_at')>=today.getTime()?/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{className:\"login-name\",children:[window.sessionStorage.getItem('email').split(\"@\")[0],\" \\uB2D8\"]}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(GoogleLogout,{className:\"nav-title\",clientId:process.env.REACT_APP_GOOGLE_LOGIN,buttonText:\"Logout\",render:function render(renderProps){return/*#__PURE__*/_jsx(\"button\",{className:\"drawer-link active\",onClick:renderProps.onClick,disabled:renderProps.disabled,children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"});},onLogoutSuccess:logout})})]}):/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsxs(\"li\",{children:[\" \",/*#__PURE__*/_jsx(GoogleLogin,{clientId:process.env.REACT_APP_GOOGLE_LOGIN,render:function render(renderProps){return/*#__PURE__*/_jsx(\"button\",{className:\"drawer-link active\",onClick:renderProps.onClick,disabled:renderProps.disabled,children:\"Google\\uB85C \\uB85C\\uADF8\\uC778\"});},buttonText:\"Login\",onSuccess:responseGoogle,onFailure:responseGoogle,cookiePolicy:'single_host_origin'})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"drawer-right\",children:submenuOpen===\"lecture\"?/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+\"lecture/subject\"?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+\"lecture/subject\",children:\"\\uC8FC\\uC81C\\uBCC4\"})}),/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+\"lecture/instructor\"?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+\"lecture/instructor\",children:\"\\uAC15\\uC0AC\\uBCC4\"})}),/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+\"lecture/date\"?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+\"lecture/date\",children:\"\\uB0A0\\uC9DC\\uBCC4\"})})]}):submenuOpen===\"mypage\"?/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+\"mypage\"?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+\"mypage\",children:\"\\uC0AC\\uC6A9\\uC790-\\uB9C8\\uC774\\uD398\\uC774\\uC9C0\"})}),/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+\"mypage/profile\"?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+\"mypage/profile\",children:\"\\uAC15\\uC0AC-\\uD504\\uB85C\\uD544\"})}),/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+\"mypage/lecture\"?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+\"mypage/lecture\",children:\"\\uAC15\\uC0AC-\\uB0B4 \\uAC15\\uC758\"})}),/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+\"mypage/contact\"?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+\"mypage/contact\",children:\"\\uAC15\\uC0AC-\\uCEE8\\uD0DD\\uC77C\\uC9C0\"})}),/*#__PURE__*/_jsx(\"li\",{className:props.history.location.pathname===process.env.REACT_APP_DEFAULT_URL+\"mypage/visitlog\"?\"active\":\"\",children:/*#__PURE__*/_jsx(Link,{className:\"drawer-link\",to:process.env.REACT_APP_DEFAULT_URL+\"mypage/visitlog\",children:\"\\uAC15\\uC0AC-\\uBC29\\uBB38\\uC77C\\uC9C0\"})})]}):/*#__PURE__*/_jsx(\"ul\",{})})]})}):/*#__PURE__*/_jsx(\"div\",{})]});}export default MainMenu;","map":{"version":3,"sources":["/Users/jeong-yeeun/git/CourseApplicationManagement_frontend/course_application_management/src/components/modules/menu/main.js"],"names":["React","useState","useEffect","GoogleLogin","GoogleLogout","axios","Link","MainMenu","props","drawerOpen","setDrawerOpen","submenuOpen","setSubmenuOpen","loading","setLoading","today","Date","history","location","pathname","switchDrawer","responseGoogle","response","params","URLSearchParams","append","tokenObj","id_token","profileObj","email","expires_at","post","process","env","REACT_APP_RESTAPI_HOST","res","data","window","sessionStorage","setItem","name","status","id","reload","alert","logout","getItem","auth2","gapi","getAuthInstance","signOut","then","removeItem","failLogin","REACT_APP_DEFAULT_URL","menu","map","index","url","getTime","REACT_APP_GOOGLE_LOGIN","renderProps","onClick","disabled","split"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport { GoogleLogin,GoogleLogout } from 'react-google-login';\nimport axios from 'axios';\nimport '../../../assets/css/header.css';\nimport { Link } from 'react-router-dom';\n\nfunction MainMenu(props) {\n    const [drawerOpen, setDrawerOpen] = useState(false);\n    const [submenuOpen, setSubmenuOpen] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const today = new Date();\n\n    useEffect(()=>{\n        setDrawerOpen(false);\n        setSubmenuOpen(null);\n    },[props.history.location.pathname])\n\n    function switchDrawer() {\n        setDrawerOpen(!drawerOpen);\n    }\n\n    const responseGoogle = async (response) => {\n        setLoading(true);\n        const params = new URLSearchParams()\n        params.append('token', response.tokenObj.id_token);\n        params.append('email', response.profileObj.email);\n        params.append('expire', response.tokenObj.expires_at);\n\n        const res = await axios.post(\n        process.env.REACT_APP_RESTAPI_HOST + 'user/login', params\n        );\n        if(res.data !== \"fail\"){\n        window.sessionStorage.setItem('email', response.profileObj.email);\n        window.sessionStorage.setItem('name', response.profileObj.name);\n        window.sessionStorage.setItem('token', response.tokenObj.id_token);\n        window.sessionStorage.setItem('expires_at', response.tokenObj.expires_at);\n        window.sessionStorage.setItem('status', res.data.status);\n        window.sessionStorage.setItem('id', res.data.id);\n        \n        window.location.reload();\n        }else{\n        alert(\"로그인 할 수 없습니다. 관리자에게 문의해주세요.\");\n        }\n        setLoading(false);\n    }\n\n    const logout = async () => {\n        setLoading(true);\n        const params = new URLSearchParams()\n        params.append('email', window.sessionStorage.getItem('email'));\n\n        await axios.post(\n        process.env.REACT_APP_RESTAPI_HOST + 'user/logout', params\n        );\n\n        const auth2 = window.gapi.auth2.getAuthInstance();\n        auth2.signOut().then(function() {\n        window.sessionStorage.removeItem('email');\n        window.sessionStorage.removeItem('name');\n        window.sessionStorage.removeItem('token');\n        window.sessionStorage.removeItem('expires_at');\n\n        setLoading(false);\n        window.location.reload();\n        });\n    }\n    const failLogin = async () => {\n        alert(\"로그인에 실패했습니다.\");\n    }\n    return (\n    <div>\n        <div id=\"main-navbar\">\n            <div className=\"nav-logo\">\n                <img width=\"110px\" alt=\"logo\" src={process.env.REACT_APP_DEFAULT_URL+\"image/logo.png\"} />\n            </div>\n            <div className=\"nav-title-wrapper\">\n                {props.menu !== null ?\n                    props.menu.map((data, index) => (\n                        <Link key={index} to={process.env.REACT_APP_DEFAULT_URL+data.url} className=\"nav-title\">{data.name}</Link>\n                    ))\n                    : null\n                }\n                {/* <Link to={process.env.REACT_APP_DEFAULT_URL+\"lecture/subject\"} className=\"nav-title\">강의보기</Link> */}\n                {loading ? null:\n                    window.sessionStorage.getItem(\"token\") !== null && window.sessionStorage.getItem('expires_at') >= today.getTime()?    \n                    <GoogleLogout\n                    clientId={process.env.REACT_APP_GOOGLE_LOGIN}\n                    buttonText=\"Logout\"\n                    render={renderProps => (<button className=\"nav-title\" onClick={renderProps.onClick} disabled={renderProps.disabled}>로그아웃</button>)}\n                    onLogoutSuccess={logout}\n                    >\n                    </GoogleLogout>: <GoogleLogin\n                    clientId= {process.env.REACT_APP_GOOGLE_LOGIN}\n                    render={renderProps => (<button className=\"nav-title\" onClick={renderProps.onClick} disabled={renderProps.disabled}>로그인</button>\n                    )}\n                    buttonText=\"Login\"\n                    onSuccess={responseGoogle}\n                    onFailure={failLogin}\n                    cookiePolicy={'single_host_origin'}\n                    />\n                }\n            </div>\n        </div>\n        <div id=\"main-navbar-mobile\">\n            <div onClick = {() => {switchDrawer()}}> <img alt=\"logo\" className=\"drawer-toggle\" src={process.env.REACT_APP_DEFAULT_URL+\"image/mobile_drawer.png\"}/></div>\n            <img alt=\"logo\" width=\"110px\" src={process.env.REACT_APP_DEFAULT_URL+\"image/logo_black.png\"}/>\n            <div></div>\n        </div>\n        {\n            drawerOpen !== false?\n            <div className=\"drawer-wrapper\">\n                <div className=\"drawer-content\">\n                    <div className=\"drawer-left\">\n                        <ul>\n                        <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL}>홈</Link></li>\n                            {props.menu !== null ?\n                                props.menu.map((data, index) => \n                                    data.url === \"lecture/subject\"?\n                                    <li className={submenuOpen === \"lecture\"? \"active\":\"\"} onClick = {() => {setSubmenuOpen(\"lecture\")}}>강의 보기</li>:\n                                    data.url === \"mypage/profile\"?\n                                    <li className={submenuOpen === \"mypage/profile\"? \"active\":\"\"} onClick = {() => {setSubmenuOpen(\"mypage\")}}>마이 페이지</li>:\n                                    <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+data.url? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+data.url}>{data.name}</Link></li>\n                                ):null\n                            }\n                        </ul>\n                        {loading ? null:\n                            window.sessionStorage.getItem(\"token\") !== null && window.sessionStorage.getItem('expires_at') >= today.getTime()?    \n                            <ul>\n                                <li className=\"login-name\">{window.sessionStorage.getItem('email').split(\"@\")[0]} 님</li>\n                                <li>\n                                <GoogleLogout\n                                className=\"nav-title\"\n                                clientId={process.env.REACT_APP_GOOGLE_LOGIN}\n                                buttonText=\"Logout\"\n                                render={renderProps => (<button className=\"drawer-link active\" onClick={renderProps.onClick} disabled={renderProps.disabled}>로그아웃</button>\n                                    )}\n                                onLogoutSuccess={logout}\n                                >\n                                </GoogleLogout>\n                            </li></ul>: \n                            <ul>\n                                <li> <GoogleLogin\n                                clientId= {process.env.REACT_APP_GOOGLE_LOGIN}\n                                render={renderProps => (<button className=\"drawer-link active\" onClick={renderProps.onClick} disabled={renderProps.disabled}>Google로 로그인</button>\n                                )}\n                                buttonText=\"Login\"\n                                onSuccess={responseGoogle}\n                                onFailure={responseGoogle}\n                                cookiePolicy={'single_host_origin'}\n                                /></li>\n                            </ul>\n                        }\n                        \n                    </div>\n                    <div className=\"drawer-right\">\n                        {submenuOpen === \"lecture\"? \n                        <ul>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"lecture/subject\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"lecture/subject\"}>주제별</Link></li>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"lecture/instructor\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"lecture/instructor\"}>강사별</Link></li>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"lecture/date\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"lecture/date\"}>날짜별</Link></li>\n                        </ul>:\n                        submenuOpen === \"mypage\"? \n                        <ul>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"mypage\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"mypage\"}>사용자-마이페이지</Link></li>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"mypage/profile\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"mypage/profile\"}>강사-프로필</Link></li>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"mypage/lecture\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"mypage/lecture\"}>강사-내 강의</Link></li>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"mypage/contact\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"mypage/contact\"}>강사-컨택일지</Link></li>\n                            <li className={props.history.location.pathname === process.env.REACT_APP_DEFAULT_URL+\"mypage/visitlog\"? \"active\":\"\"}><Link className=\"drawer-link\" to={process.env.REACT_APP_DEFAULT_URL+\"mypage/visitlog\"}>강사-방문일지</Link></li>\n                        </ul>:\n                        <ul></ul>\n                        }\n                    </div>\n                </div>\n            </div>:\n            <div></div>\n        }\n    </div>        \n    );\n}\n\nexport default MainMenu;\n\n"]},"metadata":{},"sourceType":"module"}