{"ast":null,"code":"var _jsxFileName = \"/Users/hyerm2/Desktop/project/vision/CourseApplicationManagement_frontend/course_application_management/src/components/modules/calendar/lecture_calendar.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useRef, useEffect, useState } from \"react\";\nimport TUICalendar from \"@toast-ui/react-calendar\";\nimport \"tui-calendar/dist/tui-calendar.css\";\nimport \"tui-date-picker/dist/tui-date-picker.css\";\nimport '../../../assets/css/calendar.css';\nimport \"tui-time-picker/dist/tui-time-picker.css\";\nimport WhiteButton from '../button/white_button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst calendarColor = [\"#000000\", \"#e49d5a\", \"#4285f4\", \"#e4ce5a\", \"#c0afff\", \"#9fcae8\", \"#F23DA0\", \"#3C5FA6\", \"#F28705\", \"#467326\", \"#D99066\", \"#ff5722\"];\n\nfunction LectureCalendar(props) {\n  _s();\n\n  const cal = useRef(null);\n  const [schedules, setschedules] = useState([]);\n  const [calendars, setcalendars] = useState([]);\n  const [year, setyear] = useState(\"\");\n  const [month, setmonth] = useState(\"\");\n  useEffect(() => {\n    if (props.calendarData !== null) {\n      const data = props.calendarData; // var index = 0;\n\n      var tempSchedule = [];\n\n      for (var i = 0; i < data.length; i++) {\n        if (data[i].form_id === 0) {\n          tempSchedule.push({\n            calendarId: 2,\n            category: \"time\",\n            isAllDay: true,\n            isVisible: true,\n            title: \"강의\" + (i + 1),\n            id: i + 1,\n            start: data[i].date,\n            end: data[i].date\n          });\n        } else {\n          tempSchedule.push({\n            calendarId: 1,\n            category: \"time\",\n            isAllDay: true,\n            isReadOnly: true,\n            isVisible: true,\n            title: \"강의\" + (i + 1),\n            id: i + 1,\n            start: data[i].date,\n            end: data[i].date\n          });\n        }\n      }\n\n      if (props.academyDates !== null) {\n        props.academyDates.forEach((data, index) => {\n          tempSchedule.push({\n            calendarId: 3,\n            isAllDay: true,\n            isVisible: true,\n            category: \"time\",\n            isReadOnly: true,\n            title: data.name,\n            id: 0,\n            start: data.date,\n            end: data.date\n          });\n        });\n      }\n\n      var tempCalendar = [];\n      tempCalendar.push({\n        id: 1,\n        name: \"수정 불가\",\n        color: calendarColor[3],\n        bgColor: calendarColor[3] + \"40\",\n        dragBgColor: calendarColor[3] + \"40\",\n        borderColor: calendarColor[3]\n      });\n      tempCalendar.push({\n        id: 2,\n        name: \"수정 가능\",\n        color: calendarColor[2],\n        bgColor: calendarColor[2] + \"40\",\n        dragBgColor: calendarColor[2] + \"40\",\n        borderColor: calendarColor[2]\n      });\n      tempCalendar.push({\n        id: 3,\n        name: \"학사 일정\",\n        color: calendarColor[0],\n        bgColor: calendarColor[0] + \"40\",\n        dragBgColor: calendarColor[0] + \"40\",\n        borderColor: calendarColor[0]\n      });\n      setcalendars(tempCalendar);\n      setschedules(tempSchedule);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [props.calendarData]);\n  useEffect(() => {\n    let today = new Date();\n    let year = today.getFullYear(); // 년도\n\n    let month = today.getMonth() + 1; // 월\n    // let date = today.getDate();  // 날짜\n    // let day = today.getDay();  // 요일\n\n    if (month < 10) month = \"0\" + month;\n    setyear(year);\n    setmonth(month);\n  }, []);\n  const onClickSchedule = useCallback(e => {\n    const {\n      calendarId,\n      id\n    } = e.schedule;\n    cal.current.calendarInst.getElement(id, calendarId);\n  }, []);\n  const onBeforeCreateSchedule = useCallback(scheduleData => {\n    var date = scheduleData.start._date;\n    var year = date.getFullYear();\n    var month = date.getMonth() + 1;\n    var day = date.getDate();\n    if (month < 10) month = \"0\" + month;\n    if (day < 10) day = \"0\" + day;\n    date = year + \"-\" + month + \"-\" + day; // var index = 0;\n    // if(schedules !== null && schedules.length > 0) {\n    //     // index = schedules[schedules.length-1].id;\n    // }\n    // const addSchedule = {\n    //     calendarId: 2,\n    //     category: \"time\",\n    //     isAllDay: true,\n    //     isVisible: true,\n    //     title: \"강의\"+(index+1),\n    //     id: index+1,\n    //     start: date,\n    //     end: date\n    // }\n\n    const addDate = {\n      date: date,\n      form_id: 0,\n      lecture_date_id: 0\n    }; // setschedules(schedules.concat(addSchedule));\n\n    props.setResultDates(props.calendarData.concat(addDate)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [schedules]);\n\n  const deleteDate = res => {\n    // eslint-disable-next-line no-unused-vars\n    const {\n      id,\n      calendarId\n    } = res.schedule;\n    setschedules(schedules.filter(e => e.id !== id));\n    var tempData = [];\n    props.calendarData.forEach((data, i) => {\n      if (i + 1 !== id) tempData.push({\n        lecture_date_id: data.date_id,\n        date: data.date,\n        form_id: data.form_id\n      });\n    });\n    props.setResultDates(tempData);\n  };\n\n  function _getFormattedTime(time) {\n    const date = new Date(time);\n    const h = date.getHours();\n    const m = date.getMinutes();\n    return `${h}:${m}`;\n  }\n\n  function _getTimeTemplate(schedule, isAllDay) {\n    var html = [];\n\n    if (!isAllDay) {\n      html.push(\"<strong>\" + _getFormattedTime(schedule.start) + \"</strong> \");\n    }\n\n    if (schedule.isPrivate) {\n      html.push('<span class=\"calendar-font-icon ic-lock-b\"></span>');\n      html.push(\" Private\");\n    } else {\n      if (schedule.isReadOnly) {\n        html.push('<span class=\"calendar-font-icon ic-readonly-b\"></span>');\n      } else if (schedule.recurrenceRule) {\n        html.push('<span class=\"calendar-font-icon ic-repeat-b\"></span>');\n      } else if (schedule.attendees.length) {\n        html.push('<span class=\"calendar-font-icon ic-user-b\"></span>');\n      } else if (schedule.location) {\n        html.push('<span class=\"calendar-font-icon ic-location-b\"></span>');\n      }\n\n      html.push(\" \" + schedule.title);\n    }\n\n    return html.join(\"\");\n  }\n\n  const templates = {\n    time: function (schedule) {\n      return _getTimeTemplate(schedule, false);\n    }\n  };\n  const NextButton = useCallback(e => {\n    if (cal !== null) {\n      const calendarInstance = cal.current.getInstance();\n      calendarInstance.next();\n      var m = calendarInstance.getDate().getMonth() + 1;\n      var y = calendarInstance.getDate().getFullYear();\n      if (m < 10) m = \"0\" + m; // var date = y+\"-\"+m;\n\n      setmonth(m);\n      setyear(y);\n    }\n  }, []);\n  const PrevButton = useCallback(e => {\n    if (cal !== null) {\n      const calendarInstance = cal.current.getInstance();\n      calendarInstance.prev();\n      var m = calendarInstance.getDate().getMonth() + 1;\n      var y = calendarInstance.getDate().getFullYear();\n      if (m < 10) m = \"0\" + m; // var date = y+\"-\"+m;\n\n      setmonth(m);\n      setyear(y); // props.readMainCalendar(date)\n    }\n  }, []);\n  const TodayButton = useCallback(e => {\n    if (cal !== null) {\n      const calendarInstance = cal.current.getInstance();\n      calendarInstance.today();\n      var m = calendarInstance.getDate().getMonth() + 1;\n      var y = calendarInstance.getDate().getFullYear();\n      if (m < 10) m = \"0\" + m; // var date = y+\"-\"+m;\n\n      setmonth(m);\n      setyear(y);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"calendar-title\",\n      children: [year, \"\\uB144 \", month, \"\\uC6D4\\uC758 \\uAC15\\uC758\\uC77C\\uC815\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb15\",\n      children: [/*#__PURE__*/_jsxDEV(WhiteButton, {\n        class: \"mr15\",\n        name: \"\\uC624\\uB298\\uB0A0\\uC9DC\",\n        click: TodayButton\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(WhiteButton, {\n        class: \"mr15\",\n        name: \"<\",\n        click: PrevButton\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(WhiteButton, {\n        name: \">\",\n        click: NextButton\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TUICalendar, {\n      ref: cal,\n      height: \"100%\",\n      view: \"month\",\n      useCreationPopup: false,\n      useDetailPopup: true,\n      template: templates,\n      calendars: calendars,\n      schedules: schedules,\n      onClickSchedule: onClickSchedule,\n      onBeforeCreateSchedule: onBeforeCreateSchedule,\n      onBeforeDeleteSchedule: deleteDate // onBeforeUpdateSchedule={onBeforeUpdateSchedule}\n\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 264,\n    columnNumber: 9\n  }, this);\n}\n\n_s(LectureCalendar, \"t5k24kK7INjHkNf+sJiZv6mLrdc=\");\n\n_c = LectureCalendar;\nexport default LectureCalendar;\n\nvar _c;\n\n$RefreshReg$(_c, \"LectureCalendar\");","map":{"version":3,"sources":["/Users/hyerm2/Desktop/project/vision/CourseApplicationManagement_frontend/course_application_management/src/components/modules/calendar/lecture_calendar.js"],"names":["React","useCallback","useRef","useEffect","useState","TUICalendar","WhiteButton","calendarColor","LectureCalendar","props","cal","schedules","setschedules","calendars","setcalendars","year","setyear","month","setmonth","calendarData","data","tempSchedule","i","length","form_id","push","calendarId","category","isAllDay","isVisible","title","id","start","date","end","isReadOnly","academyDates","forEach","index","name","tempCalendar","color","bgColor","dragBgColor","borderColor","today","Date","getFullYear","getMonth","onClickSchedule","e","schedule","current","calendarInst","getElement","onBeforeCreateSchedule","scheduleData","_date","day","getDate","addDate","lecture_date_id","setResultDates","concat","deleteDate","res","filter","tempData","date_id","_getFormattedTime","time","h","getHours","m","getMinutes","_getTimeTemplate","html","isPrivate","recurrenceRule","attendees","location","join","templates","NextButton","calendarInstance","getInstance","next","y","PrevButton","prev","TodayButton"],"mappings":"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","sourcesContent":["import React, { useCallback, useRef, useEffect, useState } from \"react\";\nimport TUICalendar from \"@toast-ui/react-calendar\";\n\nimport \"tui-calendar/dist/tui-calendar.css\";\nimport \"tui-date-picker/dist/tui-date-picker.css\";\nimport '../../../assets/css/calendar.css';\nimport \"tui-time-picker/dist/tui-time-picker.css\";\nimport WhiteButton from '../button/white_button';\n\nconst calendarColor = [\"#000000\",\"#e49d5a\", \"#4285f4\", \"#e4ce5a\" ,\"#c0afff\",\"#9fcae8\",\"#F23DA0\", \"#3C5FA6\", \"#F28705\", \"#467326\", \"#D99066\", \"#ff5722\"];\n\nfunction LectureCalendar(props) {\n    const cal = useRef(null);\n    const [schedules, setschedules] = useState([])\n    const [calendars, setcalendars] = useState([])\n    const [year, setyear] = useState(\"\")\n    const [month, setmonth] = useState(\"\")\n\n    useEffect(() => {\n        if(props.calendarData !== null) {\n            const data = props.calendarData;\n            // var index = 0;\n            var tempSchedule = [];\n            \n            for(var i=0 ; i<data.length ; i++) {\n                if(data[i].form_id === 0) {\n                    tempSchedule.push({\n                        calendarId: 2,\n                        category: \"time\",\n                        isAllDay: true,\n                        isVisible: true,\n                        title: \"강의\"+(i+1),\n                        id: i+1,\n                        start: data[i].date,\n                        end: data[i].date\n                    })\n                } else {\n                    tempSchedule.push({\n                        calendarId: 1,\n                        category: \"time\",\n                        isAllDay: true,\n                        isReadOnly: true,\n                        isVisible: true,\n                        title: \"강의\"+(i+1),\n                        id: i+1,\n                        start: data[i].date,\n                        end: data[i].date\n                    })\n                }\n            }\n\n            if(props.academyDates !== null) {\n                props.academyDates.forEach((data, index) => {\n                    tempSchedule.push({\n                        calendarId: 3,\n                        isAllDay: true,\n                        isVisible: true,\n                        category: \"time\",\n                        isReadOnly: true,\n                        title: data.name,\n                        id: 0,\n                        start: data.date,\n                        end: data.date\n                    })\n                });\n            }\n            \n\n            var tempCalendar  = [];\n            tempCalendar.push({\n                id: 1,\n                name: \"수정 불가\",\n                color: calendarColor[3],\n                bgColor: calendarColor[3]+\"40\",\n                dragBgColor: calendarColor[3]+\"40\",\n                borderColor: calendarColor[3]\n            });\n            tempCalendar.push({\n                id: 2,\n                name: \"수정 가능\",\n                color: calendarColor[2],\n                bgColor: calendarColor[2]+\"40\",\n                dragBgColor: calendarColor[2]+\"40\",\n                borderColor: calendarColor[2]\n            });\n            tempCalendar.push({\n                id: 3,\n                name: \"학사 일정\",\n                color: calendarColor[0],\n                bgColor: calendarColor[0]+\"40\",\n                dragBgColor: calendarColor[0]+\"40\",\n                borderColor: calendarColor[0]\n            });\n            setcalendars(tempCalendar);\n            setschedules(tempSchedule);\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.calendarData])\n\n\n\n    useEffect(() => {\n        let today = new Date();   \n        let year = today.getFullYear(); // 년도\n        let month = today.getMonth() + 1;  // 월\n        // let date = today.getDate();  // 날짜\n        // let day = today.getDay();  // 요일\n\n        if(month < 10)\n            month = \"0\"+month;\n        setyear(year)\n        setmonth(month)\n    }, [])\n\n    const onClickSchedule = useCallback((e) => {\n        const { calendarId, id } = e.schedule;\n        cal.current.calendarInst.getElement(id, calendarId);\n\n    }, []);\n\n\n    const onBeforeCreateSchedule = useCallback((scheduleData) => {\n\n        var date = scheduleData.start._date;\n        var year = date.getFullYear(); \n        var month = date.getMonth() + 1; \n        var day = date.getDate();\n        if(month < 10)\n            month = \"0\"+month;\n        if(day < 10)\n            day = \"0\"+day;\n        date = year+\"-\"+month+\"-\"+day;\n        // var index = 0;\n        // if(schedules !== null && schedules.length > 0) {\n        //     // index = schedules[schedules.length-1].id;\n        // }\n        // const addSchedule = {\n        //     calendarId: 2,\n        //     category: \"time\",\n        //     isAllDay: true,\n        //     isVisible: true,\n        //     title: \"강의\"+(index+1),\n        //     id: index+1,\n        //     start: date,\n        //     end: date\n        // }\n        const addDate = {\n            date:date,\n            form_id:0,\n            lecture_date_id: 0\n        }\n        // setschedules(schedules.concat(addSchedule));\n        props.setResultDates(props.calendarData.concat(addDate));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [schedules]);\n\n    const deleteDate = (res) => {\n        // eslint-disable-next-line no-unused-vars\n        const { id, calendarId } = res.schedule;\n\n        setschedules(schedules.filter((e) => (e.id !== id)))\n        var tempData = [];\n        props.calendarData.forEach((data, i) => {\n            if(i+1 !== id)\n                tempData.push({\n                    lecture_date_id: data.date_id,\n                    date: data.date,\n                    form_id: data.form_id\n                })        \n        });\n        props.setResultDates(tempData);\n    }\n\n    function _getFormattedTime(time) {\n        const date = new Date(time);\n        const h = date.getHours();\n        const m = date.getMinutes();\n\n        return `${h}:${m}`;\n    }\n\n    function _getTimeTemplate(schedule, isAllDay) {\n        var html = [];\n\n        if (!isAllDay) {\n            html.push(\"<strong>\" + _getFormattedTime(schedule.start) + \"</strong> \");\n        }\n        if (schedule.isPrivate) {\n            html.push('<span class=\"calendar-font-icon ic-lock-b\"></span>');\n            html.push(\" Private\");\n        } else {\n            if (schedule.isReadOnly) {\n                html.push('<span class=\"calendar-font-icon ic-readonly-b\"></span>');\n            } else if (schedule.recurrenceRule) {\n                html.push('<span class=\"calendar-font-icon ic-repeat-b\"></span>');\n            } else if (schedule.attendees.length) {\n                html.push('<span class=\"calendar-font-icon ic-user-b\"></span>');\n            } else if (schedule.location) {\n                html.push('<span class=\"calendar-font-icon ic-location-b\"></span>');\n            }\n            html.push(\" \" + schedule.title);\n        }\n\n        return html.join(\"\");\n    }\n\n    const templates = {\n        time: function (schedule) {\n            return _getTimeTemplate(schedule, false);\n        }\n    };\n\n    const NextButton = useCallback((e) => {\n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.next();\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n            // var date = y+\"-\"+m;\n\n            setmonth(m);\n            setyear(y)\n        }\n    }, []);\n\n    const PrevButton = useCallback((e) => {\n\n        if (cal !== null) {\n            const calendarInstance = cal.current.getInstance();\n            calendarInstance.prev();\n            var m = calendarInstance.getDate().getMonth() + 1;\n            var y = calendarInstance.getDate().getFullYear();\n            if(m < 10)\n                m = \"0\"+m;\n            // var date = y+\"-\"+m;\n\n            setmonth(m);\n            setyear(y)\n\n            // props.readMainCalendar(date)\n        }\n\n        \n    }, []);\n\n    const TodayButton = useCallback((e) => {\n        if (cal !== null) {\n        const calendarInstance = cal.current.getInstance();\n        calendarInstance.today();\n        var m = calendarInstance.getDate().getMonth() + 1;\n        var y = calendarInstance.getDate().getFullYear();\n        if(m < 10)\n            m = \"0\"+m;\n        // var date = y+\"-\"+m;\n\n        setmonth(m);\n        setyear(y)\n        }\n    }, []);\n\n    return (\n        <div>\n        <h2 className=\"calendar-title\">{year}년 {month}월의 강의일정</h2>\n            <div className=\"mb15\">\n                <WhiteButton class=\"mr15\" name=\"오늘날짜\" click={TodayButton}/>\n                <WhiteButton class=\"mr15\" name=\"<\" click={PrevButton}/>\n                <WhiteButton name=\">\" click={NextButton}/>\n            </div>\n            <TUICalendar\n                ref={cal}\n                height=\"100%\"\n                view=\"month\"\n                useCreationPopup={false}\n                useDetailPopup={true}\n                template={templates}\n                calendars={calendars}\n                schedules={schedules}\n                onClickSchedule={onClickSchedule}\n                onBeforeCreateSchedule={onBeforeCreateSchedule}\n                onBeforeDeleteSchedule={deleteDate}\n                // onBeforeUpdateSchedule={onBeforeUpdateSchedule}\n            />\n        </div>\n    );\n}\n\nexport default LectureCalendar;"]},"metadata":{},"sourceType":"module"}